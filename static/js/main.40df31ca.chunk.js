(this["webpackJsonptuna-mayonnaise-ui"]=this["webpackJsonptuna-mayonnaise-ui"]||[]).push([[0],{126:function(t,e){},170:function(t,e){},208:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=208},209:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=209},409:function(t,e,n){},410:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n(29),r=n.n(o),c=n(7),i=n.n(c),s=n(10),u=n(83),l=n(2),d=n(8),p=n(145),h=n(146),j=n(155),v=n(148),b=n.n(v),f=n(58),O=n(149),m=n(150),g=n.n(m),y=n(151),k=n(11),x=n(3),w=n(4),C=n(6),N=n(5),S=n(23),E=n.n(S),D=n(17),T=(n(163),n(43),n(152)),M=n(412),P=n(0),F=function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(e),r=Object(s.a)(o,2),c=r[0],i=r[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),d=l[0],p=l[1],h=Object(a.useState)(null),j=Object(s.a)(h,2),v=j[0],b=j[1];return Object(M.a)((function(){null!==v&&(k.b.error(v),b(null))}),1e4),Object(P.jsx)(E.a,{value:c,onValueChange:function(t){try{T.parse(t),p(!1),b(null)}catch(e){b(e.message),p(!0)}i(t),n(t)},highlight:function(t){return Object(D.highlight)(t,D.languages.json)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"300px"}})},I=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var i=o.data[a]||'{"name": "value"}';return o.data[a]=i,o.data.output=i,r.props={readonly:c,value:i,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);I.component=function(t){var e=t.value,n=t.onChange;return Object(P.jsx)("div",{ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(P.jsx)(F,{value:e,onChange:function(t){return n(t)}})})};var L=I,J=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t){var a;return Object(x.a)(this,n),(a=e.call(this,"JSON")).path=["New"],a.socket=t,a}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Output("json","JSON",this.socket);return t.addControl(new L(this.editor,"json",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.json=t.data.json}}]),n}(l.c.Component),R=(n(165),n(153)),V=function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(e),r=Object(s.a)(o,2),c=r[0],i=r[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),d=l[0],p=l[1],h=Object(a.useState)(null),j=Object(s.a)(h,2),v=j[0],b=j[1];return Object(M.a)((function(){null!==v&&(k.b.error(v),b(null))}),1e4),Object(P.jsx)(E.a,{value:c,onValueChange:function(t){try{R.parse(t),p(!1),b(null)}catch(e){b(e.message),p(!0)}i(t),n(t)},highlight:function(t){return Object(D.highlight)(t,D.languages.sql)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"300px"}})},A=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var i=o.data[a]||"SELECT * FROM users";return o.data[a]=i,o.data.output=i,r.props={readonly:c,value:i,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);A.component=function(t){var e=t.value,n=t.onChange;return Object(P.jsx)("div",{ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(P.jsx)(V,{value:e,onChange:function(t){return n(t)}})})};var q=A,B=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t){var a;return Object(x.a)(this,n),(a=e.call(this,"SQL")).path=["New"],a.socket=t,a}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Output("sql","SQL",this.socket);return t.addControl(new q(this.editor,"sql",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.sql=t.data.sql}}]),n}(l.c.Component),H=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,o=a.outputs,r=a.controls,c=a.inputs,i=a.selected;return Object(P.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(P.jsx)("div",{className:"title",children:"Template"}),o.map((function(t){return Object(P.jsxs)("div",{className:"output",children:[Object(P.jsx)("div",{className:"output-title",children:t.name}),Object(P.jsx)(d.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),r.map((function(t){return Object(P.jsx)(d.a,{className:"control",control:t,innerRef:n},t.key)})),c.map((function(t){return Object(P.jsxs)("div",{className:"input",children:[Object(P.jsx)(d.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(P.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(d.b),_=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.keys=[],r.component=n.component,r.props={readonly:c,value:"",onChange:function(){}},o.data.output="",r}return Object(w.a)(n,[{key:"setValue",value:function(t,e,n){for(var a in this.props.value=e,this.putData("output",e),this.putData("contentType",n),t)t[a][0]&&this.putData(a,t[a][0]);this.update()}}]),n}(l.c.Control);_.component=function(t){var e=t.value,n=t.onChange;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(P.jsx)("textarea",{value:e,rows:10,ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},disabled:!0})]})};var U=_,K=n(56),z=n(57),W=n.n(z),Q=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r;return Object(x.a)(this,n),(r=e.call(this,"Template")).path=["New"],r.data.component=H,r.dataSocket=t,r.templateSocket=a,r.htmlSocket=o,r}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Input("template","TemplateEngine",this.templateSocket),n=new l.c.Input("json","Data (JSON)",this.dataSocket),a=new l.c.Output("html","HTML",this.htmlSocket);return n.addControl(new L(this.editor,"json",t)),t.addInput(e).addInput(n).addControl(new U(this.editor,"template",t,!0)).addOutput(a)}},{key:"worker",value:function(t,e,n){var a=e.json.length?e.json[0]:t.data.json,o=t.inputs.template.connections.filter((function(t){return"hbs"===(null===t||void 0===t?void 0:t.output)||"pug"===(null===t||void 0===t?void 0:t.output)})),r=function(){var n;if(0===o.length)return"No TemplateEngine detected...";var r=o[0].output,c=(null===(n=e.template)||void 0===n?void 0:n.length)?e.template[0]:t.data.json;return"pug"===r?K.render(c,JSON.parse(a)):"hbs"===r?W.a.compile(c)(JSON.parse(a)):void 0}();this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("template").setValue(e,r,"text/html; charset=utf-8"),n.html=r}}]),n}(l.c.Component),Y=(n(135),n(136),n(389),function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(e),r=Object(s.a)(o,2),c=r[0],i=r[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),d=l[0],p=l[1],h=Object(a.useState)(null),j=Object(s.a)(h,2),v=j[0],b=j[1];return Object(M.a)((function(){null!==v&&(k.b.error(v),b(null))}),1e4),Object(P.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(P.jsx)(E.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:c,onValueChange:function(t){try{W.a.precompile(t),p(!1),b(null)}catch(e){b(e.message),p(!0)}i(t),n(t)},highlight:function(t){return Object(D.highlight)(t,D.languages.handlebars).split("\n").map((function(t){return'<span class="container_editor_line_number">'.concat(t,"</span>")})).join("\n")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"800px"}})})}),X=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var i=o.data[a]||"<div>{{name}}</div>";return o.data[a]=i,o.data.output=i,r.props={readonly:c,value:i,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);X.component=function(t){var e=t.value,n=t.onChange;return Object(P.jsx)("div",{ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(P.jsx)(Y,{value:e,onChange:function(t){return n(t)}})})};var G=X,Z=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t){var a;return Object(x.a)(this,n),(a=e.call(this,"Handlebars")).path=["New"],a.socket=t,a}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Output("hbs","Handlebars",this.socket);return t.addControl(new G(this.editor,"hbs",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.hbs=t.data.hbs}}]),n}(l.c.Component),$=(n(390),function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(e),r=Object(s.a)(o,2),c=r[0],i=r[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),d=l[0],p=l[1],h=Object(a.useState)(null),j=Object(s.a)(h,2),v=j[0],b=j[1];return Object(M.a)((function(){null!==v&&(k.b.error(v),b(null))}),1e4),Object(P.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(P.jsx)(E.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:c,onValueChange:function(t){try{K.compile(t),p(!1),b(null)}catch(e){b(e.message),p(!0)}i(t),n(t)},highlight:function(t){return Object(D.highlight)(t,D.languages.pug).split("\n").map((function(t){return'<span class="container_editor_line_number">'.concat(t,"</span>")})).join("\n")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"800px"}})})}),tt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var i=o.data[a]||"div #{name}";return o.data[a]=i,o.data.output=i,r.props={readonly:c,value:i,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);tt.component=function(t){var e=t.value,n=t.onChange;return Object(P.jsx)("div",{ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(P.jsx)($,{value:e,onChange:function(t){return n(t)}})})};var et=tt,nt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t){var a;return Object(x.a)(this,n),(a=e.call(this,"Pug")).path=["New"],a.socket=t,a}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Output("pug","Pug",this.socket);return t.addControl(new et(this.editor,"pug",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.pug=t.data.pug}}]),n}(l.c.Component),at=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,o=a.outputs,r=a.controls,c=a.inputs,i=a.selected;return Object(P.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(P.jsx)("div",{className:"title",children:"Endpoint"}),o.map((function(t){return Object(P.jsxs)("div",{className:"output",children:[Object(P.jsx)("div",{className:"output-title",children:t.name}),Object(P.jsx)(d.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),r.map((function(t){return Object(P.jsx)(d.a,{className:"control",control:t,innerRef:n},t.key)})),c.map((function(t){return Object(P.jsxs)("div",{className:"input",children:[Object(P.jsx)(d.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(P.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(d.b),ot=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.component=n.component,r.props={readonly:c,value:"",onChange:function(){}},o.data.output="",r}return Object(w.a)(n,[{key:"setValue",value:function(t,e,n,a,o){for(var r in this.props.value=e,this.putData("enabledFlag",a),this.putData("output",e),this.putData("contentType",n),this.putData("path",o),t)t[r][0]&&this.putData(r,t[r][0]);this.update()}}]),n}(l.c.Control);ot.component=function(t){var e=t.value,n=t.onChange;return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(P.jsx)("textarea",{value:e,rows:10,ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},disabled:!0})]})};var rt=ot,ct=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var s=o.data[a]||!1;return o.data[a]=s,o.data.output=s,r.props={readonly:c,checked:s,title:i,onChange:function(t){r.setValue(!!t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){this.props.checked=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);ct.component=function(t){var e=t.checked,n=t.onChange,a=t.title,o=t.id,r=void 0===o?(new Date).getTime():o;return Object(P.jsxs)(P.Fragment,{children:[a&&Object(P.jsx)("div",{style:{color:"white",textAlign:"left",marginBottom:"5px"},children:a}),Object(P.jsxs)("div",{class:"switchArea",children:[Object(P.jsx)("input",{type:"checkbox",id:r,checked:e,ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(+t.target.checked)}}),Object(P.jsx)("label",{for:r,children:Object(P.jsx)("span",{})}),Object(P.jsx)("div",{class:"swImg"})]})]})};var it=ct,st=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var u=o.data[a]||"";return o.data[a]=u,o.data.output=u,r.props={readonly:c,value:u,title:i,placeHolder:s,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);st.component=function(t){var e=t.value,n=t.onChange,a=t.title,o=t.placeHolder;return Object(P.jsxs)(P.Fragment,{children:[a&&Object(P.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(P.jsx)("input",{type:"text",value:e,placeholder:o,ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))}})]})};var ut=st,lt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var l=o.data[a]||"/foo";return o.data[a]=l,o.data.output=l,r.props={readonly:c,value:l,title:i,placeHolder:s,warn:u,onChange:function(t){""===t?r.props.warn=!0:"/metrics"===t||"/health"===t?(r.props.warn=!0,k.b.error("this Path is reserved, use another Path.")):r.props.warn=!1,r.setValue(t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);lt.component=function(t){var e=t.value,n=t.onChange,a=t.title,o=t.placeHolder,r=t.warn;return Object(P.jsxs)(P.Fragment,{children:[a&&Object(P.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(P.jsx)("input",{type:"text",value:e,placeholder:o,ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},style:{background:r?"rgba(255, 0, 80, 0.7)":"#FFF"}})]})};var dt=lt,pt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t){var a;return Object(x.a)(this,n),(a=e.call(this,"Endpoint")).path=["New"],a.data.component=at,a.stringSocket=t,a}return Object(w.a)(n,[{key:"builder",value:function(t){var e;t.data.enabledFlag=null===(e=t.data.enabledFlag)||void 0===e||e;var n=new l.c.Input("content","Content (JSON/HTML)",this.stringSocket);return n.addControl(new ut(this.editor,"content",t)),t.addInput(n).addControl(new rt(this.editor,"endpoint",t,!0)).addControl(new it(this.editor,"enabledFlag",t,!1,"Enabled")).addControl(new dt(this.editor,"path",t,!1,"Path","/foo"))}},{key:"worker",value:function(t,e,n){var a=e.content.length?e.content[0]:"Rendering...",o=function(t){if(t)return"html"===t.output?"text/html; charset=utf-8":"json"===t.output?"application/json; charset=utf-8":"text/plain; charset=utf-8"}(t.inputs.content.connections[0]),r=t.data.enabledFlag,c=t.data.path;this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("endpoint").setValue(e,a,o,r,c)}}]),n}(l.c.Component),ht=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,o=a.outputs,r=a.controls,c=a.inputs,i=a.selected;return Object(P.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(P.jsx)("div",{className:"title",children:"JSONManager"}),o.map((function(t){return Object(P.jsxs)("div",{className:"output",children:[Object(P.jsx)("div",{className:"output-title",children:t.name}),Object(P.jsx)(d.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),r.map((function(t){return Object(P.jsx)(d.a,{className:"control",control:t,innerRef:n},t.key)})),c.map((function(t){return Object(P.jsxs)("div",{className:"input jsonManagerInput",children:[Object(P.jsx)(d.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(P.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(d.b),jt=n(41),vt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.component=n.component,r.props={readonly:c,inputs:[],outputs:o.data.output?JSON.parse(o.data.output):[],state:{pointerPos:{x:0,y:0},drag:{},selectedElement:{}},isDroppable:!1,onPointerOver:function(t){r.props.isDroppable=!0},onPointerOut:function(t){r.props.isDroppable=!1},onPointerDown:function(t){var e=t.currentTarget;r.props.state.pointerPos.x=t.clientX,r.props.state.pointerPos.y=t.clientY,r.props.state.selectedElement=e;var n=e.cloneNode(!0),a=n.style;a.transition="",a.pointerEvents="none",a.display="none",a.position="absolute";var o=e.getBoundingClientRect().left-e.closest(".jsonManagerCtrl").getBoundingClientRect().left+10;a.left=o+"px",e.after(n);var c=e.getBoundingClientRect(),i={x:c.left,y:c.top};r.props.state.drag={dragElement:n,position:i},e.classList.remove("jsonManagerCtrlInputKeyHover");var s=e.closest(".node");s.style.cursor="grabbing",s.addEventListener("pointerup",r.props.onPointerUp),s.addEventListener("pointermove",r.props.onPointerMove)},onPointerMove:function(t){t.stopPropagation();var e=t.clientX,n=t.clientY,a=r.props.state,o=a.drag,c=a.pointerPos,i=e-c.x,s=n-c.y,u=o.dragElement.style;u.display="inline-block",u.zIndex="100",u.transform="translate(".concat(i,"px,").concat(s,"px)")},onPointerUp:function(t){var e=r.props.state,n=e.drag,a=e.selectedElement;r.props.state.drag=null,a.classList.add("jsonManagerCtrlInputKeyHover");var o=a.closest(".node");if(o.style.cursor="pointer",o.removeEventListener("pointerup",r.props.onPointerUp),o.removeEventListener("pointermove",r.props.onPointerMove),r.props.isDroppable){var c=parseInt(a.dataset.idx),i=a.innerText;1===r.props.outputs.filter((function(t){return t.key===i})).length?r.props.outputs=r.props.outputs.map((function(t){return t.key===i?{src:c,key:t.key,value:JSON.parse(r.props.inputs[c])[t.key]}:t})):r.props.outputs.push({src:c,key:i,value:JSON.parse(r.props.inputs[c])[i]}),r.putData("output",JSON.stringify(r.props.outputs)),r.update(),r.emitter.trigger("process")}n.dragElement.remove()},onClickCloseBtn:function(t){var e=t.currentTarget;r.props.outputs=r.props.outputs.reduce((function(t,n){return n.key===e.dataset.key?t:[].concat(Object(jt.a)(t),[n])}),[]),r.putData("output",JSON.stringify(r.props.outputs)),r.update(),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){var e=this,n=t.content;this.props.outputs.reduce((function(t,e){return t.includes(e.src)?t:[].concat(Object(jt.a)(t),[e.src])}),[]).length>n.length?this.props.outputs=[]:n.forEach((function(t,n){return e.props.outputs=e.props.outputs.reduce((function(e,a){if(a.src===n){var o=JSON.parse(t);return Object.keys(o).includes(a.key)?[].concat(Object(jt.a)(e),[{src:a.src,key:a.key,value:o[a.key]}]):e}return[].concat(Object(jt.a)(e),[a])}),[])})),this.props.inputs=n,this.putData("output",JSON.stringify(this.props.outputs)),this.update()}}]),n}(l.c.Control);vt.component=function(t){var e=t.inputs,n=t.outputs,a=t.onPointerDown,o=t.onPointerOver,r=t.onPointerOut,c=t.onClickCloseBtn;return Object(P.jsxs)("div",{className:"jsonManagerCtrl",children:[Object(P.jsxs)("div",{className:"jsonManagerCtrlInputs",children:[Object(P.jsxs)("div",{className:"jsonManagerCtrlInput",children:[Object(P.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Input"}),e.map((function(t,e){try{var n=JSON.parse(t);return Array.isArray(n)?Object(P.jsxs)("div",{className:"jsonManagerCtrlInputGroup",children:[Object(P.jsxs)("p",{className:"jsonManagerCtrlInputTitle",children:["input_",e]}),Object(P.jsx)("p",{className:"jsonManagerCtrlInputKey",children:"Array"})]}):Object(P.jsxs)("div",{className:"jsonManagerCtrlInputGroup",children:[Object(P.jsxs)("p",{className:"jsonManagerCtrlInputTitle",children:["input_",e]}),Object.keys(n).map((function(t){return Object(P.jsx)("p",{className:"jsonManagerCtrlInputKey jsonManagerCtrlInputKeyHover",onPointerDown:a,"data-idx":e,children:t})}))]})}catch(o){return""}}))]}),Object(P.jsx)("div",{className:"jsonManagerCtrlFunctions",children:Object(P.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Functions"})})]}),Object(P.jsx)("div",{className:"jsonManagerCtrlHint",children:">>>"}),Object(P.jsxs)("div",{className:"jsonManagerCtrlOutput",onPointerOver:o,onPointerOut:r,children:[Object(P.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Output"}),Object(P.jsx)("div",{className:"jsonManagerCtrlOutputArea",children:n.map((function(t){return Object(P.jsxs)("p",{className:"jsonManagerCtrlOutputKey",children:[t.key,Object(P.jsx)("span",{className:"closeBtn",onClick:c,"data-key":t.key})]})}))})]})]})};var bt=vt,ft=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t){var a;return Object(x.a)(this,n),(a=e.call(this,"JSONManager")).path=["New"],a.data.component=ht,a.jsonSocket=t,a}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Input("content","JSONs",this.jsonSocket,!0),n=new l.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new bt(this.editor,"jsonManager",t,!0)).addOutput(n)}},{key:"worker",value:function(t,e,n){if(this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("jsonManager").setValue(e),"[]"===t.data.output)n.json="";else if(""!==t.data.output){var a=JSON.parse(t.data.output).map((function(t){return[t.key,t.value]}));n.json=JSON.stringify(Object.fromEntries(a))}}}]),n}(l.c.Component),Ot=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var l=o.data[a]||s;return o.data[a]=l,o.data.output=l,r.props={readonly:c,value:l,title:i,disabled:u,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.value=t,this.props.disabled=e,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);Ot.component=function(t){var e=t.value,n=t.onChange,a=t.title,o=t.disabled;return Object(P.jsxs)(P.Fragment,{children:[a&&Object(P.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(P.jsx)("input",{type:"number",value:e,ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(+t.target.value)},disabled:o})]})};var mt=Ot,gt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,o=this.state,r=o.outputs,c=o.controls,i=o.inputs,s=o.selected;return Object(P.jsxs)("div",{className:"node ".concat(s),style:{background:"grey"},children:[Object(P.jsx)("div",{className:"title",children:e.name}),r.map((function(t){return Object(P.jsxs)("div",{className:"output",children:[Object(P.jsx)("div",{className:"output-title",children:t.name}),Object(P.jsx)(d.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),c.map((function(t){return Object(P.jsx)(d.a,{className:"control",control:t,innerRef:a},t.key)})),i.map((function(t){return Object(P.jsxs)("div",{className:"input",children:[Object(P.jsx)(d.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(P.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(P.jsx)(d.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(d.b),yt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t){var a;return Object(x.a)(this,n),(a=e.call(this,"API")).path=["New"],a.data.component=gt,a.jsonSocket=t,a}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new l.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new ut(this.editor,"url",t,!1,"URL","https://example.com/bar")).addControl(new it(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new mt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.url=t.data.url,n.cached=t.data.cached,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(l.c.Component),kt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a,o){var r,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];Object(x.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var u=o.data[a]||s[0];return o.data[a]=u,o.data.output=u,r.props={readonly:c,value:u,title:i,values:s,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(w.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(l.c.Control);kt.component=function(t){var e=t.title,n=t.value,a=t.values,o=t.onChange;return Object(P.jsxs)(P.Fragment,{children:[e&&Object(P.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:e}),Object(P.jsx)("select",{style:{width:"100%"},value:n,ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return o(String(t.target.value))},children:a.map((function(t){return Object(P.jsx)("option",{value:t,children:t})}))})]})};var xt=kt,wt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(){return Object(x.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,o=this.state,r=o.outputs,c=o.controls,i=o.inputs,s=o.selected,u=c.filter((function(t){return"db"===t.key})).map((function(t){return""===t.props.value?"DB":t.props.value.toUpperCase()}))[0],l=c.filter((function(t){return"user"===t.key})).map((function(t){return""===t.props.value?"USER":t.props.value.toUpperCase()}))[0],p="".concat(u,"_PASS_ON_").concat(l);return Object(P.jsxs)("div",{className:"node ".concat(s),style:{background:"grey"},children:[Object(P.jsx)("div",{className:"title",children:e.name}),r.map((function(t){return Object(P.jsxs)("div",{className:"output",children:[Object(P.jsx)("div",{className:"output-title",children:t.name}),Object(P.jsx)(d.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),c.map((function(t){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(d.a,{className:"control",control:t,innerRef:a},t.key),"db"===t.key&&Object(P.jsxs)("div",{class:"control",title:"pass",children:[Object(P.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"DB_PASS"}),Object(P.jsx)("textarea",{rows:"3",placeholder:"set ".concat(p," when tuna api starting"),value:"",disabled:!0})]})]})})),i.map((function(t){return Object(P.jsxs)("div",{className:"input",children:[Object(P.jsx)(d.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(P.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(P.jsx)(d.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(d.b),Ct=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a){var o;return Object(x.a)(this,n),(o=e.call(this,"MySQL")).path=["New"],o.data.component=wt,o.jsonSocket=t,o.sqlSocket=a,o}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new l.c.Output("json","JSON",this.jsonSocket),a=new l.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new xt(this.editor,"tls",t,!1,"TLS",["false","true","skip-verify","preferred"])).addControl(new ut(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new ut(this.editor,"port",t,!1,"PORT","3306")).addControl(new ut(this.editor,"user",t,!1,"USER","guest")).addControl(new ut(this.editor,"db",t,!1,"DB_NAME","foo")).addControl(new it(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new mt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.tls=t.data.tls,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(l.c.Component),Nt=function(t){Object(C.a)(n,t);var e=Object(N.a)(n);function n(t,a){var o;return Object(x.a)(this,n),(o=e.call(this,"PostgreSQL")).path=["New"],o.data.component=wt,o.jsonSocket=t,o.sqlSocket=a,o}return Object(w.a)(n,[{key:"builder",value:function(t){var e=new l.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new l.c.Output("json","JSON",this.jsonSocket),a=new l.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new xt(this.editor,"tls",t,!1,"SSLMODE",["disable","require","verify-ca","verify-full"])).addControl(new ut(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new ut(this.editor,"port",t,!1,"PORT","5432")).addControl(new ut(this.editor,"user",t,!1,"USER","guest")).addControl(new ut(this.editor,"db",t,!1,"DB_NAME","foo")).addControl(new it(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new mt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.sslmode=t.data.sslmode,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(l.c.Component),St=n(84),Et=n.n(St),Dt=n(154);function Tt(){return(Tt=Object(u.a)(i.a.mark((function t(e){var n,a,o,r,c,v,m,x,w,C,N,S,E,D,T;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new l.c.Socket("String value"),(a=new l.c.Socket("Json value")).combineWith(n),(o=new l.c.Socket("Template value")).combineWith(n),(r=new l.c.Socket("Handlebars value")).combineWith(o),(c=new l.c.Socket("Pug value")).combineWith(o),(v=new l.c.Socket("HTML value")).combineWith(n),m=new l.c.Socket("SQL value"),x=[new pt(n),new ft(a),new J(a),new Q(a,o,v),new Z(r),new nt(c),new B(m),new yt(a),new Ct(a,m),new Nt(a,m)],w=window.navigator.userAgent.toLowerCase(),C=-1!==w.indexOf("mac os x"),N=function(){var t=document.activeElement.nodeName;return"TEXTAREA"===t||"INPUT"===t},(S=new l.c.NodeEditor("tuna-mayonnaise@0.0.1",e)).use(p.a),S.use(d.d),S.use(j.a,{searchBar:!1,delay:100,allocate:function(t){return t.path},rename:function(t){return t.name},items:{Arrange:function(){S.nodes.forEach((function(t){S.trigger("arrange",t)}))},Undo:function(){S.trigger("undo")},Redo:function(){S.trigger("redo")},Save:function(){Et.a.post("/regist",S.toJSON()).then((function(){return k.b.success("SAVED :)")})).catch((function(){return k.b.error("NOT CONNECTED :(")}))},Download:function(){var t=new Blob([JSON.stringify(S.toJSON())],{type:"application/json;charset=utf-8"});Object(Dt.saveAs)(t,"tuna-mayonnaise.json")},Debug:function(){console.log(JSON.stringify(S.toJSON()))}}}),S.on("zoom",(function(t){var e=t.source;return"dblclick"!==e&&"wheel"===e&&!N()})),S.use(y.a,{keyboard:!1}),S.on("keydown",(function(t){if(!N()){switch(t.code){case"Delete":case"Backspace":return S.selected.each((function(t){S.removeNode(t)})),void S.selected.clear();case"Space":var e=S.view.container.getBoundingClientRect(),n=new PointerEvent("contextmenu",{clientX:e.left+e.width/2,clientY:e.top+e.height/2});return void S.trigger("contextmenu",{e:n,view:S.view})}if(t.ctrlKey||C&&t.metaKey)switch(t.code){case"KeyY":return void S.trigger("redo");case"KeyZ":return void(t.shiftKey?S.trigger("redo"):S.trigger("undo"))}}})),S.use(b.a),S.use(f.a,{type:f.a.DEFAULT,transformer:function(){return function(t){var e=Object(s.a)(t,4);return[[e[0],e[1]],[e[2],e[3]]]}},curve:f.a.curveBundle,options:{vertical:!1,curvature:.4},arrow:{color:"steelblue",marker:"M-5,-10 L-5,10 L20,0 z"}}),S.use(O.a),S.use(g.a,{margin:{x:200,y:50},depth:0}),E=new l.c.Engine("tuna-mayonnaise@0.0.1"),x.forEach((function(t){S.register(t),E.register(t)})),t.next=31,Et.a.get("/tuna-configuration").then((function(t){return t.data})).catch((function(){return document.getElementsByClassName("rightClick")[0].style.display="block",null}));case 31:if(null===(D=t.sent)){t.next=38;break}return t.next=35,S.fromJSON(D);case 35:k.b.success("RESUMED :)"),t.next=43;break;case 38:return t.next=40,x[0].createNode();case 40:(T=t.sent).position=[1e3,200],S.addNode(T);case 43:S.on("showcontextmenu",(function(t){t.e,t.node;return document.getElementsByClassName("rightClick")[0].style.display="none",!0})),S.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelectorAll(".editorTextarea").forEach((function(t){t.addEventListener("wheel",(function(e){N()&&(t.parentElement.parentElement.scrollTop+=e.deltaY)}))})),t.next=3,E.abort();case 3:return t.next=5,E.process(S.toJSON());case 5:case"end":return t.stop()}}),t)})))),S.view.resize(),S.trigger("process"),h.a.zoomAt(S,S.nodes);case 48:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(408),n(409);function Mt(){return Object(P.jsxs)("div",{className:"App",children:[Object(P.jsx)(k.a,{}),Object(P.jsx)("img",{className:"rightClick",src:"right-click.svg",width:"200",height:"200",alt:"RightClick for Menu",style:{display:"none",position:"absolute",top:"25%",left:"25%"}}),Object(P.jsx)("div",{style:{width:"100vh",height:"100vh"},ref:function(t){return t&&function(t){return Tt.apply(this,arguments)}(t)}})]})}var Pt=document.getElementById("root");r.a.render(Object(P.jsx)(Mt,{}),Pt)}},[[410,1,2]]]);