(this["webpackJsonptuna-mayonnaise-ui"]=this["webpackJsonptuna-mayonnaise-ui"]||[]).push([[0],{146:function(t,e){},210:function(t,e){},248:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=248},249:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=249},432:function(t,e,n){},433:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),o=n(23),s=n.n(o),c=n(57),i=n.n(c),u=n(11),l=n(7),p=n.n(l),d=n(9),h=n(88),j=n(2),f=n(8),v=n(157),b=n(158),m=n(167),O=n(160),g=n.n(O),y=n(61),x=n(161),k=n(162),C=n.n(k),N=n(163),w=n(89),S=n.n(w),F=n(164),E=n(3),M=n(4),J=n(6),T=n(5),D=n(24),I=n.n(D),P=n(17),L=(n(203),n(45),n(165)),R=n(435),A=n(0),V=function(t){var e=t.value,n=t.onChange,r=Object(a.useState)(e),o=Object(d.a)(r,2),s=o[0],c=o[1],i=Object(a.useState)(!1),l=Object(d.a)(i,2),p=l[0],h=l[1],j=Object(a.useState)(null),f=Object(d.a)(j,2),v=f[0],b=f[1];return Object(R.a)((function(){null!==v&&(u.b.error(v),b(null))}),1e4),Object(A.jsx)(I.a,{value:s,onValueChange:function(t){try{L.parse(t),h(!1),b(null)}catch(e){b(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(P.highlight)(t,P.languages.json)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:p?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"300px"}})},B=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var c=r.data[a]||'{"name": "value"}';return r.data[a]=c,r.data.output=c,o.props={readonly:s,value:c,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);B.component=function(t){var e=t.value,n=t.onChange;return Object(A.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(A.jsx)(V,{value:e,onChange:function(t){return n(t)}})})};var H=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(E.a)(this,n),(a=e.call(this,"JSON")).path=["New"],a.socket=t,a}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("json","JSON",this.socket);return t.addControl(new B(this.editor,"json",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.json=t.data.json}}]),n}(j.c.Component),_=(n(205),n(166)),q=function(t){var e=t.value,n=t.onChange,r=Object(a.useState)(e),o=Object(d.a)(r,2),s=o[0],c=o[1],i=Object(a.useState)(!1),l=Object(d.a)(i,2),p=l[0],h=l[1],j=Object(a.useState)(null),f=Object(d.a)(j,2),v=f[0],b=f[1];return Object(R.a)((function(){null!==v&&(u.b.error(v),b(null))}),1e4),Object(A.jsx)(I.a,{value:s,onValueChange:function(t){try{_.parse(t),h(!1),b(null)}catch(e){b(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(P.highlight)(t,P.languages.sql)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:p?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"300px"}})},U=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var c=r.data[a]||"SELECT * FROM users";return r.data[a]=c,r.data.output=c,o.props={readonly:s,value:c,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);U.component=function(t){var e=t.value,n=t.onChange;return Object(A.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(A.jsx)(q,{value:e,onChange:function(t){return n(t)}})})};var K=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(E.a)(this,n),(a=e.call(this,"SQL")).path=["New"],a.socket=t,a}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("sql","SQL",this.socket);return t.addControl(new U(this.editor,"sql",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.sql=t.data.sql}}]),n}(j.c.Component),W=n(59),z=n(60),Y=n.n(z),Q=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(){return Object(E.a)(this,n),e.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,r=a.outputs,o=a.controls,s=a.inputs,c=a.selected;return Object(A.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(A.jsx)("div",{className:"title",children:"Template"}),r.map((function(t){return Object(A.jsxs)("div",{className:"output",children:[Object(A.jsx)("div",{className:"output-title",children:t.name}),Object(A.jsx)(f.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),o.map((function(t){return Object(A.jsx)(f.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(A.jsxs)("div",{className:"input",children:[Object(A.jsx)(f.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(A.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(f.b),$=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.keys=[],o.component=n.component,o.props={readonly:s,value:"",onChange:function(){}},r.data.output="",o}return Object(M.a)(n,[{key:"setValue",value:function(t,e,n){var a=this;this.props.value=e,this.putData("output",e),this.putData("contentType",n),Object.entries(t).forEach((function(t){var e=Object(d.a)(t,2),n=e[0],r=e[1];r[0]&&a.putData(n,r[0])})),this.update()}}]),n}(j.c.Control);$.component=function(t){var e=t.value,n=t.onChange;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(A.jsx)("textarea",{value:e,rows:10,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},disabled:!0})]})};var X=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o;return Object(E.a)(this,n),(o=e.call(this,"Template")).path=["New"],o.data.component=Q,o.dataSocket=t,o.templateSocket=a,o.htmlSocket=r,o}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("template","TemplateEngine",this.templateSocket),n=new j.c.Input("json","Data (JSON)",this.dataSocket),a=new j.c.Output("html","HTML",this.htmlSocket);return n.addControl(new B(this.editor,"json",t)),t.addInput(e).addInput(n).addControl(new $(this.editor,"template",t,!0)).addOutput(a)}},{key:"worker",value:function(t,e,n){var a=e.json.length?e.json[0]:t.data.json,r=t.inputs.template.connections.filter((function(t){return"hbs"===(null===t||void 0===t?void 0:t.output)||"pug"===(null===t||void 0===t?void 0:t.output)})),o=function(){var n;if(0===r.length)return"No TemplateEngine detected...";var o=r[0].output,s=(null===(n=e.template)||void 0===n?void 0:n.length)?e.template[0]:t.data.json;return"pug"===o?W.render(s,JSON.parse(a)):"hbs"===o?Y.a.compile(s)(JSON.parse(a)):"Unknown TemplateEngine detected..."}();this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("template").setValue(e,o,"text/html; charset=utf-8"),n.html=o}}]),n}(j.c.Component),G=(n(155),n(156),n(429),function(t){var e=t.value,n=t.onChange,r=Object(a.useState)(e),o=Object(d.a)(r,2),s=o[0],c=o[1],i=Object(a.useState)(!1),l=Object(d.a)(i,2),p=l[0],h=l[1],j=Object(a.useState)(null),f=Object(d.a)(j,2),v=f[0],b=f[1];return Object(R.a)((function(){null!==v&&(u.b.error(v),b(null))}),1e4),Object(A.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(A.jsx)(I.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:s,onValueChange:function(t){try{Y.a.precompile(t),h(!1),b(null)}catch(e){b(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(P.highlight)(t,P.languages.handlebars).split("\n").map((function(t){return'<span class="container_editor_line_number">'.concat(t,"</span>")})).join("\n")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:p?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"800px"}})})}),Z=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var c=r.data[a]||"<div>{{name}}</div>";return r.data[a]=c,r.data.output=c,o.props={readonly:s,value:c,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);Z.component=function(t){var e=t.value,n=t.onChange;return Object(A.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(A.jsx)(G,{value:e,onChange:function(t){return n(t)}})})};var tt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(E.a)(this,n),(a=e.call(this,"Handlebars")).path=["New"],a.socket=t,a}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("hbs","Handlebars",this.socket);return t.addControl(new Z(this.editor,"hbs",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.hbs=t.data.hbs}}]),n}(j.c.Component),et=(n(430),function(t){var e=t.value,n=t.onChange,r=Object(a.useState)(e),o=Object(d.a)(r,2),s=o[0],c=o[1],i=Object(a.useState)(!1),l=Object(d.a)(i,2),p=l[0],h=l[1],j=Object(a.useState)(null),f=Object(d.a)(j,2),v=f[0],b=f[1];return Object(R.a)((function(){null!==v&&(u.b.error(v),b(null))}),1e4),Object(A.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(A.jsx)(I.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:s,onValueChange:function(t){try{W.compile(t),h(!1),b(null)}catch(e){b(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(P.highlight)(t,P.languages.pug).split("\n").map((function(t){return'<span class="container_editor_line_number">'.concat(t,"</span>")})).join("\n")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:p?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"800px"}})})}),nt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var c=r.data[a]||"div #{name}";return r.data[a]=c,r.data.output=c,o.props={readonly:s,value:c,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);nt.component=function(t){var e=t.value,n=t.onChange;return Object(A.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(A.jsx)(et,{value:e,onChange:function(t){return n(t)}})})};var at=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(E.a)(this,n),(a=e.call(this,"Pug")).path=["New"],a.socket=t,a}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("pug","Pug",this.socket);return t.addControl(new nt(this.editor,"pug",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.pug=t.data.pug}}]),n}(j.c.Component),rt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(){return Object(E.a)(this,n),e.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,r=a.outputs,o=a.controls,s=a.inputs,c=a.selected;return Object(A.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(A.jsx)("div",{className:"title",children:"Endpoint"}),r.map((function(t){return Object(A.jsxs)("div",{className:"output",children:[Object(A.jsx)("div",{className:"output-title",children:t.name}),Object(A.jsx)(f.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),o.map((function(t){return Object(A.jsx)(f.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(A.jsxs)("div",{className:"input",children:[Object(A.jsx)(f.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(A.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(f.b),ot=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.component=n.component,o.props={readonly:s,value:"",contentType:"",onChange:function(){}},r.data.output="",o}return Object(M.a)(n,[{key:"setValue",value:function(t,e,n,a,r){var o=this;this.props.value=e,this.props.contentType=n,this.putData("enabledFlag",a),this.putData("output",e),this.putData("contentType",n),this.putData("path",r),Object.entries(t).forEach((function(t){var e=Object(d.a)(t,2),n=e[0],a=e[1];a[0]&&o.putData(n,a[0])})),this.update()}}]),n}(j.c.Control);ot.component=function(t){var e=t.value,n=t.contentType,a=t.onChange;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),"text/html; charset=utf-8"===n?Object(A.jsx)("div",{className:"hasScrollbar",style:{backgroundColor:"white",overflowY:"auto",maxHeight:"500px"},dangerouslySetInnerHTML:{__html:e}}):Object(A.jsx)("textarea",{value:e,rows:10,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return a(String(t.target.value))},disabled:!0})]})};var st=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var i=r.data[a]||!1;return r.data[a]=i,r.data.output=i,o.props={readonly:s,checked:i,title:c,onChange:function(t){o.setValue(!!t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){this.props.checked=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);st.component=function(t){var e=t.checked,n=t.onChange,a=t.title,r=t.id,o=void 0===r?(new Date).getTime():r;return Object(A.jsxs)(A.Fragment,{children:[a&&Object(A.jsx)("div",{style:{color:"white",textAlign:"left",marginBottom:"5px"},children:a}),Object(A.jsxs)("div",{className:"switchArea",children:[Object(A.jsx)("input",{type:"checkbox",id:o,checked:e,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(+t.target.checked)}}),Object(A.jsx)("label",{htmlFor:o,children:Object(A.jsx)("span",{})}),Object(A.jsx)("div",{className:"swImg"})]})]})};var ct=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var u=r.data[a]||"";return r.data[a]=u,r.data.output=u,o.props={readonly:s,value:u,title:c,placeHolder:i,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);ct.component=function(t){var e=t.value,n=t.onChange,a=t.title,r=t.placeHolder;return Object(A.jsxs)(A.Fragment,{children:[a&&Object(A.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(A.jsx)("input",{type:"text",value:e,placeholder:r,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))}})]})};var it=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var p=r.data[a]||"/foo";return r.data[a]=p,r.data.output=p,o.props={readonly:s,value:p,title:c,placeHolder:i,warn:l,onChange:function(t){""===t?o.props.warn=!0:"/metrics"===t||"/health"===t?(o.props.warn=!0,u.b.error("this Path is reserved, use another Path.")):o.props.warn=!1,o.setValue(t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);it.component=function(t){var e=t.value,n=t.onChange,a=t.title,r=t.placeHolder,o=t.warn;return Object(A.jsxs)(A.Fragment,{children:[a&&Object(A.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(A.jsx)("input",{type:"text",value:e,placeholder:r,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},style:{background:o?"rgba(255, 0, 80, 0.7)":"#FFF"}})]})};var ut=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(E.a)(this,n),(a=e.call(this,"Endpoint")).path=["New"],a.data.component=rt,a.stringSocket=t,a}return Object(M.a)(n,[{key:"builder",value:function(t){var e;t.data.enabledFlag=null===(e=t.data.enabledFlag)||void 0===e||e;var n=new j.c.Input("content","Content (JSON/HTML)",this.stringSocket);return n.addControl(new ct(this.editor,"content",t)),t.addInput(n).addControl(new ot(this.editor,"endpoint",t,!0)).addControl(new st(this.editor,"enabledFlag",t,!1,"Enabled")).addControl(new it(this.editor,"path",t,!1,"Path","/foo"))}},{key:"worker",value:function(t,e){var n=e.content.length?e.content[0]:"Rendering...",a=function(t){if(t){if("html"===t.output)return"text/html; charset=utf-8";if("json"===t.output)return"application/json; charset=utf-8"}return"text/plain; charset=utf-8"}(t.inputs.content.connections[0]),r=t.data.enabledFlag,o=t.data.path;this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("endpoint").setValue(e,n,a,r,o)}}]),n}(j.c.Component),lt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(){return Object(E.a)(this,n),e.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,r=a.outputs,o=a.controls,s=a.inputs,c=a.selected;return Object(A.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(A.jsx)("div",{className:"title",children:"JSONManager"}),r.map((function(t){return Object(A.jsxs)("div",{className:"output",children:[Object(A.jsx)("div",{className:"output-title",children:t.name}),Object(A.jsx)(f.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),o.map((function(t){return Object(A.jsx)(f.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(A.jsxs)("div",{className:"input jsonManagerInput",children:[Object(A.jsx)(f.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(A.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(f.b),pt=n(36),dt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var s,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(E.a)(this,n),(s=e.call(this,a)).emitter=t,s.component=n.component,s.props={readonly:c,inputs:[],outputs:o.data.output?JSON.parse(o.data.output):[],state:{pointerPos:{x:0,y:0},drag:{},selectedElement:{}},isDroppable:!1,onPointerOver:function(){s.props.isDroppable=!0},onPointerOut:function(){s.props.isDroppable=!1},onPointerDown:function(t){var e=t.currentTarget;s.props.state.pointerPos.x=t.clientX,s.props.state.pointerPos.y=t.clientY,s.props.state.selectedElement=e;var n=e.cloneNode(!0),a=n.style;a.transition="",a.pointerEvents="none",a.display="none",a.position="absolute";var r=e.getBoundingClientRect().left-e.closest(".jsonManagerCtrl").getBoundingClientRect().left+10;a.left="".concat(r,"px"),e.after(n);var o=e.getBoundingClientRect(),c={x:o.left,y:o.top};s.props.state.drag={dragElement:n,position:c},e.classList.remove("jsonManagerCtrlInputKeyHover");var i=e.closest(".node");i.style.cursor="grabbing",i.addEventListener("pointerup",s.props.onPointerUp),i.addEventListener("pointermove",s.props.onPointerMove)},onPointerMove:function(t){t.stopPropagation();var e=t.clientX,n=t.clientY,a=s.props.state,r=a.drag,o=a.pointerPos,c=e-o.x,i=n-o.y,u=r.dragElement.style;u.display="inline-block",u.zIndex="100",u.transform="translate(".concat(c,"px,").concat(i,"px)")},onPointerUp:function(){var t=s.props.state,e=t.drag,n=t.selectedElement;s.props.state.drag=null,n.classList.add("jsonManagerCtrlInputKeyHover");var a=n.closest(".node");if(a.style.cursor="pointer",a.removeEventListener("pointerup",s.props.onPointerUp),a.removeEventListener("pointermove",s.props.onPointerMove),s.props.isDroppable){var r=parseInt(n.dataset.idx,10),o=n.innerText;if("func"!==n.dataset.type)1===s.props.outputs.filter((function(t){return t.key===o})).length?s.props.outputs=s.props.outputs.map((function(t){return t.key===o?{src:r,key:t.key,value:JSON.stringify(JSON.parse(s.props.inputs[r])[t.key])}:t})):s.props.outputs.push({src:r,key:o,value:JSON.stringify(JSON.parse(s.props.inputs[r])[o])});else{var c=s.props.outputFunctions[r].params,i=s.props.functions.filter((function(t){return t.name===s.props.outputFunctions[r].func}))[0],u=i.paramCount,l=i.logic,p=function(){if(c[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(c[0]),e=t[1],n=t[4];return n?JSON.parse(s.props.inputs[e])[n]:JSON.parse(s.props.inputs[e])}return c[0]}(),d=function(){if(2===u&&c[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(c[1]),e=t[1],n=t[4];return n?JSON.parse(s.props.inputs[e])[n]:JSON.parse(s.props.inputs[e])}return c[1]}(),h=1===u?l(p):l(p,d);1===s.props.outputs.filter((function(t){return t.key===o})).length?s.props.outputs=s.props.outputs.map((function(t){return t.key===o?{src:-1*(r+1),key:t.key,value:JSON.stringify(h)}:t})):s.props.outputs.push({src:-1*(r+1),key:o,value:JSON.stringify(h)})}s.putData("output",JSON.stringify(s.props.outputs)),s.update(),s.emitter.trigger("process")}e.dragElement.remove()},onClickCloseBtn:function(t){var e=t.currentTarget;s.props.outputs=s.props.outputs.reduce((function(t,n){return n.key===e.dataset.key?t:[].concat(Object(pt.a)(t),[n])}),[]),s.putData("output",JSON.stringify(s.props.outputs)),s.update(),s.emitter.trigger("process")},isModalOpen:!1,setModalOpen:function(t){s.props.isModalOpen=t,s.update(),s.emitter.trigger("process")},outputFunctions:Array.isArray(o.data.outputFunctions)&&0===o.data.outputFunctions.length||!o.data.outputFunctions?[]:JSON.parse(o.data.outputFunctions),functions:[{name:"Naming",paramCount:1,symbol:null,logic:function(t){return t}}],onClickAddBtn:function(t){var e=t.currentTarget.previousElementSibling.value;""!==e&&(s.props.outputFunctions.push({func:e,name:"",params:[],warn:!1}),s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process"))},onClickRemoveBtn:function(t){var e=parseInt(t.currentTarget.dataset.idx,10),n=s.props.outputFunctions[e].name;s.props.outputs=s.props.outputs.filter((function(t){return t.key!==n})),s.props.outputFunctions=s.props.outputFunctions.filter((function(t,n){return n!==e})),s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process")},onChangeModalFunc:function(t){var e=parseInt(t.currentTarget.dataset.idx,10);1===s.props.outputFunctions.filter((function(e){return e.name===t.target.value})).length?s.props.outputFunctions[e].warn=!0:s.props.outputFunctions[e].warn=!1,s.props.outputFunctions[e].name=t.target.value,s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process")},onChangeModalFuncParams:function(t){var e=parseInt(t.currentTarget.dataset.idx,10),n=parseInt(t.currentTarget.dataset.paramsIdx,10);if(2===n&&s.props.outputFunctions[e].params.length<2&&(s.props.outputFunctions[e].params[0]=null),s.props.outputFunctions[e].params[n]=t.target.value,s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.props.outputFunctions[e].name){var a=s.props.outputFunctions[e].name,r=s.props.outputFunctions[e].params,o=s.props.functions.filter((function(t){return t.name===s.props.outputFunctions[e].func}))[0],c=o.paramCount,i=o.logic;if(1===c||r[0]){var u=function(){if(r[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(r[0]),e=t[1],n=t[4];return n?JSON.parse(s.props.inputs[e])[n]:JSON.parse(s.props.inputs[e])}return r[0]}(),l=function(){if(2===c&&r[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(r[1]),e=t[1],n=t[4];return n?JSON.parse(s.props.inputs[e])[n]:JSON.parse(s.props.inputs[e])}return r[1]}(),p=1===c?i(u):i(u,l);1===s.props.outputs.filter((function(t){return t.key===a})).length&&(s.props.outputs=s.props.outputs.map((function(t){return t.key===a?{src:-1*(e+1),key:t.key,value:JSON.stringify(p)}:t})))}}s.update(),s.emitter.trigger("process")},textAreaRef:r.a.createRef(),previewRef:r.a.createRef()},s}return Object(M.a)(n,[{key:"setValue",value:function(t){var e=this,n=t.content;(this.props.inputs=n,0===n.length&&(this.props.outputs=[],this.props.outputFunctions=[]),this.props.outputs.reduce((function(t,e){return t.includes(e.src)||e.src<0?t:[].concat(Object(pt.a)(t),[e.src])}),[]).length>n.length)?(this.props.outputs=[],this.props.outputFunctions=[]):(n.forEach((function(t,n){return e.props.outputs=e.props.outputs.reduce((function(e,a){if(a.src===n){var r=JSON.parse(t);return Object.keys(r).includes(a.key)?[].concat(Object(pt.a)(e),[{src:a.src,key:a.key,value:JSON.stringify(r[a.key])}]):e}return[].concat(Object(pt.a)(e),[a])}),[])})),this.props.outputFunctions.filter((function(t){return t.name&&t.params.reduce((function(t,e){return t||e.startsWith("inputs[")}),!1)})).length&&(this.props.outputFunctions.forEach((function(t,n){try{var a=t.name,r=t.params,o=e.props.functions.filter((function(e){return e.name===t.func}))[0],s=o.paramCount,c=o.logic;if(1===s||r[0]){var i=function(){if(void 0!==r[0]&&r[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(r[0]),n=t[1],a=t[4],o=a?JSON.parse(e.props.inputs[n])[a]:JSON.parse(e.props.inputs[n]);if(void 0===o)throw Error;return o}return r[0]}(),u=function(){if(2===s&&void 0!==r[1]&&r[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(r[1]),n=t[1],a=t[4],o=a?JSON.parse(e.props.inputs[n])[a]:JSON.parse(e.props.inputs[n]);if(void 0===o)throw Error;return o}return r[1]}(),l=1===s?c(i):c(i,u);1===e.props.outputs.filter((function(t){return t.key===a})).length&&(e.props.outputs=e.props.outputs.map((function(t){return t.key===a?{src:t.src,key:t.key,value:JSON.stringify(l)}:t})))}}catch(p){e.props.outputs=e.props.outputs.filter((function(t){return t.key!==e.props.outputFunctions[n].name})),delete e.props.outputFunctions[n]}})),this.props.outputFunctions=this.props.outputFunctions.filter((function(t){return void 0!==t}))));this.putData("output",JSON.stringify(this.props.outputs)),this.update()}}]),n}(j.c.Control);dt.component=function(t){var e=t.inputs,n=t.outputs,a=t.onPointerDown,r=t.onPointerOver,o=t.onPointerOut,s=t.onClickCloseBtn,c=t.isModalOpen,u=t.setModalOpen,l=t.functions,p=t.onClickAddBtn,d=t.onChangeModalFunc,h=t.outputFunctions,j=t.onClickRemoveBtn,f=t.onChangeModalFuncParams,v=t.textAreaRef,b=t.previewRef;return Object(A.jsxs)("div",{className:"jsonManagerCtrl",children:[Object(A.jsxs)(i.a,{isOpen:c,style:{content:{padding:"0px"}},children:[Object(A.jsxs)("div",{className:"jsonManagerModalTitle",children:[Object(A.jsx)("p",{style:{display:"inline-block",fontWeight:"600",fontSize:"18px"},children:"Functions"}),Object(A.jsx)("span",{role:"button",tabIndex:"0",className:"closeBtn",onClick:function(){return u(!1)}})]}),Object(A.jsxs)("div",{className:"jsonManagerModalContent",children:[Object(A.jsxs)("select",{style:{color:"#767676"},ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:[Object(A.jsx)("option",{value:"",style:{display:"none"},children:"Select your function"}),l.map((function(t){return Object(A.jsx)("option",{value:t.name,children:t.name})}))]}),Object(A.jsx)("div",{role:"button",tabIndex:"0",className:"modalAddBtn",onClick:p,children:"Add"}),h.map((function(t,e){return Object(A.jsxs)("div",{className:"modalFunction",children:[Object(A.jsxs)("p",{className:"modalFunctionTitle",children:[t.func,Object(A.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:j,"data-idx":e})]}),Object(A.jsxs)("div",{className:"modalFunctionKey",children:[Object(A.jsx)("p",{className:"modalFunctionKeyTitle",children:"name:"}),Object(A.jsx)("input",{type:"text",value:t.name,placeholder:"name to use output",ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:d,"data-idx":e,style:{background:t.warn?"rgba(255, 0, 80, 0.7)":"#FFF"}})]}),Object(A.jsxs)("div",{className:"modalFunctionKey",children:[Object(A.jsx)("p",{className:"modalFunctionKeyTitle",children:"params: "}),Object(A.jsx)("div",{className:"modalFunctionContent",children:function(){var n=l.filter((function(e){return e.name===t.func}))[0];return 1===n.paramCount?Object(A.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_0"),placeholder:"Input or Select your param",onChange:f,"data-idx":e,"data-params-idx":0,value:t.params[0]?t.params[0]:null}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_0"),placeholder:"Input or Select your param",onChange:f,"data-idx":e,"data-params-idx":0,value:t.params[0]?t.params[0]:null}),Object(A.jsx)("span",{className:"modalFunctionContentSymbol",children:n.symbol}),Object(A.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_1"),placeholder:"Input or Select your param",onChange:f,"data-idx":e,"data-params-idx":1,value:t.params[1]?t.params[1]:null})]})}()})]})]})})),Object(A.jsx)("datalist",{id:"inputs-datalist",children:e.map((function(t,e){try{var n=JSON.parse(t);return function(){var t=Array.isArray(n)?[Object(A.jsx)("option",{value:"inputs[".concat(e,"]"),children:"inputs[".concat(e,"]")})]:[];return[].concat(t,Object(pt.a)(Object.keys(n).map((function(t){return Object(A.jsx)("option",{value:"inputs[".concat(e,"].").concat(t),children:"inputs[".concat(e,"].").concat(t)})}))))}()}catch(a){return""}}))})]})]}),Object(A.jsxs)("div",{className:"jsonManagerCtrlInputs",children:[Object(A.jsxs)("div",{className:"jsonManagerCtrlInput",children:[Object(A.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Inputs"}),e.map((function(t,e){try{var n=JSON.parse(t);return Array.isArray(n)?Object(A.jsxs)("div",{className:"jsonManagerCtrlInputGroup",children:[Object(A.jsxs)("p",{className:"jsonManagerCtrlInputTitle",children:["input_",e]}),Object(A.jsx)("p",{className:"jsonManagerCtrlInputKey",children:"Array"})]}):Object(A.jsxs)("div",{className:"jsonManagerCtrlInputGroup",children:[Object(A.jsxs)("p",{className:"jsonManagerCtrlInputTitle",children:["inputs[",e,"]"]}),Object.keys(n).map((function(t){return Object(A.jsx)("p",{className:"jsonManagerCtrlInputKey jsonManagerCtrlInputKeyHover",onPointerDown:a,"data-idx":e,children:t})}))]})}catch(r){return""}}))]}),Object(A.jsxs)("div",{className:"jsonManagerCtrlFunctions",children:[Object(A.jsxs)("p",{className:"jsonManagerCtrlCategory",children:["Functions",Object(A.jsx)("span",{role:"button",tabIndex:"0",className:"addBtn",onClick:function(){return u(!0)}})]}),Object(A.jsx)("div",{className:"jsonManagerCtrlInputGroup",children:h.map((function(t,e){return""!==t.name&&Object(A.jsxs)("p",{className:"jsonManagerCtrlInputKey jsonManagerCtrlInputKeyHover",onPointerDown:a,"data-idx":e,"data-type":"func",children:[t.name,Object(A.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:j,"data-idx":e})]})}))})]})]}),Object(A.jsx)("div",{className:"jsonManagerCtrlHint",children:">>>"}),Object(A.jsxs)("div",{className:"jsonManagerCtrlOutputs",children:[Object(A.jsxs)("div",{className:"jsonManagerCtrlPreview",style:{height:v&&b&&v.current&&b.current?"".concat(v.current.scrollHeight+b.current.scrollHeight,"px"):"initial"},children:[Object(A.jsx)("p",{className:"jsonManagerCtrlCategory",ref:b,children:"Preview"}),Object(A.jsx)("textarea",{disabled:!0,ref:v,className:"jsonManagerCtrlPreviewArea",value:0!==n.length?JSON.stringify(Object.fromEntries(n.map((function(t){return[t.key,t.value?JSON.parse(t.value):""]}))),null,2):""})]}),Object(A.jsxs)("div",{className:"jsonManagerCtrlOutput",onPointerOver:r,onPointerOut:o,children:[Object(A.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Outputs"}),Object(A.jsx)("div",{className:"jsonManagerCtrlOutputArea",children:n.map((function(t){return Object(A.jsxs)("p",{className:"jsonManagerCtrlOutputKey",children:[t.key,Object(A.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:s,"data-key":t.key})]})}))})]})]})]})};var ht=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(E.a)(this,n),(a=e.call(this,"JSONManager")).path=["New"],a.data.component=lt,a.jsonSocket=t,a}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("content","JSONs",this.jsonSocket,!0),n=new j.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new dt(this.editor,"jsonManager",t,!0)).addOutput(n)}},{key:"worker",value:function(t,e,n){if(this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("jsonManager").setValue(e),"[]"===t.data.output)n.json="";else if(""!==t.data.output){var a=JSON.parse(t.data.output).map((function(t){return[t.key,JSON.parse(t.value)]}));n.json=JSON.stringify(Object.fromEntries(a))}n.outputFunctions=t.data.outputFunctions}}]),n}(j.c.Component),jt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var l=r.data[a]||i;return r.data[a]=l,r.data.output=l,o.props={readonly:s,value:l,title:c,disabled:u,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.value=t,this.props.disabled=e,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);jt.component=function(t){var e=t.value,n=t.onChange,a=t.title,r=t.disabled;return Object(A.jsxs)(A.Fragment,{children:[a&&Object(A.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(A.jsx)("input",{type:"number",value:e,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(+t.target.value)},disabled:r})]})};var ft=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(){return Object(E.a)(this,n),e.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,r=this.state,o=r.outputs,s=r.controls,c=r.inputs,i=r.selected;return Object(A.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(A.jsx)("div",{className:"title",children:e.name}),o.map((function(t){return Object(A.jsxs)("div",{className:"output",children:[Object(A.jsx)("div",{className:"output-title",children:t.name}),Object(A.jsx)(f.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),s.map((function(t){return Object(A.jsx)(f.a,{className:"control",control:t,innerRef:a},t.key)})),c.map((function(t){return Object(A.jsxs)("div",{className:"input",children:[Object(A.jsx)(f.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(A.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(A.jsx)(f.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(f.b),vt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(E.a)(this,n),(a=e.call(this,"API")).path=["New"],a.data.component=ft,a.jsonSocket=t,a}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new ct(this.editor,"url",t,!1,"URL","https://example.com/bar")).addControl(new st(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new jt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.url=t.data.url,n.cached=t.data.cached,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(j.c.Component),bt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];Object(E.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var u=r.data[a]||i[0];return r.data[a]=u,r.data.output=u,o.props={readonly:s,value:u,title:c,values:i,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(M.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);bt.component=function(t){var e=t.title,n=t.value,a=t.values,r=t.onChange;return Object(A.jsxs)(A.Fragment,{children:[e&&Object(A.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:e}),Object(A.jsx)("select",{style:{width:"100%"},value:n,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return r(String(t.target.value))},children:a.map((function(t){return Object(A.jsx)("option",{value:t,children:t})}))})]})};var mt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(){return Object(E.a)(this,n),e.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,r=this.state,o=r.outputs,s=r.controls,c=r.inputs,i=r.selected,u=s.filter((function(t){return"db"===t.key})).map((function(t){return""===t.props.value?"DB":t.props.value.toUpperCase()}))[0],l=s.filter((function(t){return"user"===t.key})).map((function(t){return""===t.props.value?"USER":t.props.value.toUpperCase()}))[0],p="".concat(u,"_PASS_ON_").concat(l);return Object(A.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(A.jsx)("div",{className:"title",children:e.name}),o.map((function(t){return Object(A.jsxs)("div",{className:"output",children:[Object(A.jsx)("div",{className:"output-title",children:t.name}),Object(A.jsx)(f.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),s.map((function(t){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(f.a,{className:"control",control:t,innerRef:a},t.key),"db"===t.key&&Object(A.jsxs)("div",{className:"control",title:"pass",children:[Object(A.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"DB_PASS"}),Object(A.jsx)("textarea",{rows:"3",placeholder:"set ".concat(p," when tuna api starting"),value:"",disabled:!0})]})]})})),c.map((function(t){return Object(A.jsxs)("div",{className:"input",children:[Object(A.jsx)(f.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(A.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(A.jsx)(f.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(f.b),Ot=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a){var r;return Object(E.a)(this,n),(r=e.call(this,"MySQL")).path=["New"],r.data.component=mt,r.jsonSocket=t,r.sqlSocket=a,r}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket),a=new j.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new bt(this.editor,"tls",t,!1,"TLS",["false","true","skip-verify","preferred"])).addControl(new ct(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new ct(this.editor,"port",t,!1,"PORT","3306")).addControl(new ct(this.editor,"user",t,!1,"USER","guest")).addControl(new ct(this.editor,"db",t,!1,"DB_NAME","foo")).addControl(new st(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new jt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.tls=t.data.tls,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(j.c.Component),gt=function(t){Object(J.a)(n,t);var e=Object(T.a)(n);function n(t,a){var r;return Object(E.a)(this,n),(r=e.call(this,"PostgreSQL")).path=["New"],r.data.component=mt,r.jsonSocket=t,r.sqlSocket=a,r}return Object(M.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket),a=new j.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new bt(this.editor,"tls",t,!1,"SSLMODE",["disable","require","verify-ca","verify-full"])).addControl(new ct(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new ct(this.editor,"port",t,!1,"PORT","5432")).addControl(new ct(this.editor,"user",t,!1,"USER","guest")).addControl(new ct(this.editor,"db",t,!1,"DB_NAME","foo")).addControl(new st(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new jt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.sslmode=t.data.sslmode,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(j.c.Component);function yt(){return(yt=Object(h.a)(p.a.mark((function t(e){var n,a,r,o,s,c,i,l,O,k,w,E,M,J,T;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new j.c.Socket("String value"),(a=new j.c.Socket("Json value")).combineWith(n),(r=new j.c.Socket("Template value")).combineWith(n),(o=new j.c.Socket("Handlebars value")).combineWith(r),(s=new j.c.Socket("Pug value")).combineWith(r),(c=new j.c.Socket("HTML value")).combineWith(n),i=new j.c.Socket("SQL value"),l=[new ut(n),new ht(a),new H(a),new X(a,r,c),new tt(o),new at(s),new K(i),new vt(a),new Ot(a,i),new gt(a,i)],O=window.navigator.userAgent.toLowerCase(),k=-1!==O.indexOf("mac os x"),w=function(){var t=document.activeElement.nodeName;return"TEXTAREA"===t||"INPUT"===t},(E=new j.c.NodeEditor("tuna-mayonnaise@0.0.1",e)).use(v.a),E.use(f.d),E.use(m.a,{searchBar:!1,delay:100,allocate:function(t){return t.path},rename:function(t){return t.name},items:{Arrange:function(){E.nodes.forEach((function(t){E.trigger("arrange",t)}))},Undo:function(){E.trigger("undo")},Redo:function(){E.trigger("redo")},Save:function(){S.a.post("/regist",E.toJSON()).then((function(){return u.b.success("SAVED :)")})).catch((function(){return u.b.error("NOT CONNECTED :(")}))},Download:function(){var t=new Blob([JSON.stringify(E.toJSON())],{type:"application/json; charset=utf-8"});Object(F.saveAs)(t,"tuna-mayonnaise.json")},Debug:function(){console.log(JSON.stringify(E.toJSON()))}}}),E.on("zoom",(function(t){var e=t.source;return"dblclick"!==e&&"wheel"===e&&!w()})),E.use(N.a,{keyboard:!1}),E.on("keydown",(function(t){if(!w()){switch(t.code){case"Delete":case"Backspace":return E.selected.each((function(t){E.removeNode(t)})),void E.selected.clear();case"Space":var e=E.view.container.getBoundingClientRect(),n=new PointerEvent("contextmenu",{clientX:e.left+e.width/2,clientY:e.top+e.height/2});return void E.trigger("contextmenu",{e:n,view:E.view})}if(t.ctrlKey||k&&t.metaKey)switch(t.code){case"KeyY":return void E.trigger("redo");case"KeyZ":t.shiftKey?E.trigger("redo"):E.trigger("undo")}}})),E.use(g.a),E.use(y.a,{type:y.a.DEFAULT,transformer:function(){return function(t){var e=Object(d.a)(t,4);return[[e[0],e[1]],[e[2],e[3]]]}},curve:y.a.curveBundle,options:{vertical:!1,curvature:.4},arrow:{color:"steelblue",marker:"M-5,-10 L-5,10 L20,0 z"}}),E.use(x.a),E.use(C.a,{margin:{x:200,y:50},depth:0}),M=new j.c.Engine("tuna-mayonnaise@0.0.1"),l.forEach((function(t){E.register(t),M.register(t)})),t.next=31,S.a.get("/tuna-configuration").then((function(t){return t.data})).catch((function(){return document.getElementsByClassName("rightClick")[0].style.display="block",null}));case 31:if(null===(J=t.sent)){t.next=38;break}return t.next=35,E.fromJSON(J);case 35:u.b.success("RESUMED :)"),t.next=43;break;case 38:return t.next=40,l[0].createNode();case 40:(T=t.sent).position=[1e3,200],E.addNode(T);case 43:E.on("showcontextmenu",(function(){return document.getElementsByClassName("rightClick")[0].style.display="none",!0})),E.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(h.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelectorAll(".editorTextarea").forEach((function(t){t.addEventListener("wheel",(function(e){w()&&(t.parentElement.parentElement.scrollTop+=e.deltaY)}))})),t.next=3,M.abort();case 3:return t.next=5,M.process(E.toJSON());case 5:case"end":return t.stop()}}),t)})))),E.view.resize(),E.trigger("process"),b.a.zoomAt(E,E.nodes);case 48:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(431),n(432);function xt(){return Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(u.a,{}),Object(A.jsx)("img",{className:"rightClick",src:"right-click.svg",width:"200",height:"200",alt:"RightClick for Menu",style:{display:"none",position:"absolute",top:"25%",left:"25%",pointerEvents:"none"}}),Object(A.jsx)("div",{style:{width:"100vh",height:"100vh"},ref:function(t){return t&&function(t){return yt.apply(this,arguments)}(t)}})]})}i.a.setAppElement("#root");var kt=document.getElementById("root");s.a.render(Object(A.jsx)(xt,{}),kt)}},[[433,1,2]]]);