(this["webpackJsonptuna-mayonnaise-ui"]=this["webpackJsonptuna-mayonnaise-ui"]||[]).push([[0],{112:function(t,e){},156:function(t,e){},194:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=194},195:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=195},383:function(t,e,n){},384:function(t,e,n){"use strict";n.r(e);var s=n(1),o=n.n(s),a=n(23),r=n.n(a),i=n(3),c=n.n(i),l=n(69),d=n(2),u=n(4),p=n(131),h=n(132),m=n(141),j=n(134),g=n.n(j),b=n(48),v=n(135),x=n(136),O=n.n(x),k=n(137),w=n(30),y=n(18),f=n(17),C=n.n(f),N=n(11),S=(n(149),n(36),n(0));var E=({value:t,onChange:e})=>{const n=o.a.useState(t),s=Object(y.a)(n,2),a=s[0],r=s[1];return Object(S.jsx)(C.a,{value:a,onValueChange:t=>{r(t),e(t)},highlight:t=>Object(N.highlight)(t,N.languages.json),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:"#FFF",maxWidth:"300px"}})};class D extends d.c.Control{constructor(t,e,n,s=!1){super(e),this.emitter=t,this.key=e,this.component=D.component;const o=n.data[e]||'{"name": "value"}';n.data[e]=o,n.data.output=o,this.props={readonly:s,value:o,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}D.component=({value:t,onChange:e})=>Object(S.jsx)("div",{ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},children:Object(S.jsx)(E,{value:t,onChange:t=>e(t)})});var F=D;class T extends d.c.Component{constructor(t){super("JSON"),this.path=["New"],this.socket=t}builder(t){const e=new d.c.Output("json","JSON",this.socket);return t.addControl(new F(this.editor,"json",t)).addOutput(e)}worker(t,e,n){n.json=t.data.json}}var L=T;n(151);var R=({value:t,onChange:e})=>{const n=o.a.useState(t),s=Object(y.a)(n,2),a=s[0],r=s[1];return Object(S.jsx)(C.a,{value:a,onValueChange:t=>{r(t),e(t)},highlight:t=>Object(N.highlight)(t,N.languages.sql),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:"#FFF",maxWidth:"300px"}})};class V extends d.c.Control{constructor(t,e,n,s=!1){super(e),this.emitter=t,this.key=e,this.component=V.component;const o=n.data[e]||"";n.data[e]=o,n.data.output=o,this.props={readonly:s,value:o,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}V.component=({value:t,onChange:e})=>Object(S.jsx)("div",{ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},children:Object(S.jsx)(R,{value:t,onChange:t=>e(t)})});var J=V;class A extends d.c.Component{constructor(t){super("SQL"),this.path=["New"],this.socket=t}builder(t){const e=new d.c.Output("sql","SQL",this.socket);return t.addControl(new J(this.editor,"sql",t)).addOutput(e)}worker(t,e,n){n.sql=t.data.sql}}var P=A;class I extends u.b{render(){const t=this.props,e=t.bindSocket,n=t.bindControl,s=this.state,o=s.outputs,a=s.controls,r=s.inputs,i=s.selected;return Object(S.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(S.jsx)("div",{className:"title",children:"Template"}),o.map((t=>Object(S.jsxs)("div",{className:"output",children:[Object(S.jsx)("div",{className:"output-title",children:t.name}),Object(S.jsx)(u.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key))),a.map((t=>Object(S.jsx)(u.a,{className:"control",control:t,innerRef:n},t.key))),r.map((t=>Object(S.jsxs)("div",{className:"input",children:[Object(S.jsx)(u.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(S.jsx)("div",{className:"input-title",children:t.name})]},t.key)))]})}}class M extends d.c.Control{constructor(t,e,n,s=!1){super(e),this.emitter=t,this.keys=[],this.component=M.component,this.props={readonly:s,value:"",onChange:()=>{}},n.data.output=""}setValue(t,e,n){this.props.value=e,this.putData("output",e),this.putData("contentType",n);for(const s in t)t[s][0]&&this.putData(s,t[s][0]);this.update()}}M.component=({value:t,onChange:e})=>Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(S.jsx)("textarea",{value:t,rows:10,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value)),disabled:!0})]});var q=M,_=n(138),B=n(139),H=n.n(B);class U extends d.c.Component{constructor(t,e,n){super("Template"),this.path=["New"],this.data.component=I,this.dataSocket=t,this.templateSocket=e,this.htmlSocket=n}builder(t){const e=new d.c.Input("template","TemplateEngine",this.templateSocket),n=new d.c.Input("json","Data (JSON)",this.dataSocket),s=new d.c.Output("html","HTML",this.htmlSocket);return n.addControl(new F(this.editor,"json",t)),t.addInput(e).addInput(n).addControl(new q(this.editor,"template",t,!0)).addOutput(s)}worker(t,e,n){const s=e.json.length?e.json[0]:t.data.json,o=t.inputs.template.connections.filter((t=>"hbs"===(null===t||void 0===t?void 0:t.output)||"pug"===(null===t||void 0===t?void 0:t.output))),a=(()=>{var n;if(0===o.length)return"No TemplateEngine detected...";const a=o[0].output,r=(null===(n=e.template)||void 0===n?void 0:n.length)?e.template[0]:t.data.json;if("pug"===a)return _.render(r,JSON.parse(s));if("hbs"===a){return H.a.compile(r)(JSON.parse(s))}})();this.editor.nodes.find((e=>e.id===t.id)).controls.get("template").setValue(e,a,"text/html; charset=utf-8"),n.html=a}}var W=U;n(121),n(122),n(363);var z=({value:t,onChange:e})=>{const n=o.a.useState(t),s=Object(y.a)(n,2),a=s[0],r=s[1];return Object(S.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(S.jsx)(C.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:a,onValueChange:t=>{r(t),e(t)},highlight:t=>Object(N.highlight)(t,N.languages.handlebars).split("\n").map((t=>'<span class="container_editor_line_number">'.concat(t,"</span>"))).join("\n"),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:"#FFF",maxWidth:"800px"}})})};class Y extends d.c.Control{constructor(t,e,n,s=!1){super(e),this.emitter=t,this.key=e,this.component=Y.component;const o=n.data[e]||"<div>{{name}}</div>";n.data[e]=o,n.data.output=o,this.props={readonly:s,value:o,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}Y.component=({value:t,onChange:e})=>Object(S.jsx)("div",{ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},children:Object(S.jsx)(z,{value:t,onChange:t=>e(t)})});var K=Y;class Q extends d.c.Component{constructor(t){super("Handlebars"),this.path=["New"],this.socket=t}builder(t){const e=new d.c.Output("hbs","Handlebars",this.socket);return t.addControl(new K(this.editor,"hbs",t)).addOutput(e)}worker(t,e,n){n.hbs=t.data.hbs}}var X=Q;n(364);var Z=({value:t,onChange:e})=>{const n=o.a.useState(t),s=Object(y.a)(n,2),a=s[0],r=s[1];return Object(S.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(S.jsx)(C.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:a,onValueChange:t=>{r(t),e(t)},highlight:t=>Object(N.highlight)(t,N.languages.pug).split("\n").map((t=>'<span class="container_editor_line_number">'.concat(t,"</span>"))).join("\n"),padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:"#FFF",maxWidth:"800px"}})})};class G extends d.c.Control{constructor(t,e,n,s=!1){super(e),this.emitter=t,this.key=e,this.component=G.component;const o=n.data[e]||"div #{name}";n.data[e]=o,n.data.output=o,this.props={readonly:s,value:o,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}G.component=({value:t,onChange:e})=>Object(S.jsx)("div",{ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},children:Object(S.jsx)(Z,{value:t,onChange:t=>e(t)})});var $=G;class tt extends d.c.Component{constructor(t){super("Pug"),this.path=["New"],this.socket=t}builder(t){const e=new d.c.Output("pug","Pug",this.socket);return t.addControl(new $(this.editor,"pug",t)).addOutput(e)}worker(t,e,n){n.pug=t.data.pug}}var et=tt;class nt extends u.b{render(){const t=this.props,e=t.bindSocket,n=t.bindControl,s=this.state,o=s.outputs,a=s.controls,r=s.inputs,i=s.selected;return Object(S.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(S.jsx)("div",{className:"title",children:"Endpoint"}),o.map((t=>Object(S.jsxs)("div",{className:"output",children:[Object(S.jsx)("div",{className:"output-title",children:t.name}),Object(S.jsx)(u.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key))),a.map((t=>Object(S.jsx)(u.a,{className:"control",control:t,innerRef:n},t.key))),r.map((t=>Object(S.jsxs)("div",{className:"input",children:[Object(S.jsx)(u.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(S.jsx)("div",{className:"input-title",children:t.name})]},t.key)))]})}}class st extends d.c.Control{constructor(t,e,n,s=!1){super(e),this.emitter=t,this.component=st.component,this.props={readonly:s,value:"",onChange:()=>{}},n.data.output=""}setValue(t,e,n,s,o){this.props.value=e,this.putData("enabledFlag",s),this.putData("output",e),this.putData("contentType",n),this.putData("path",o);for(const a in t)t[a][0]&&this.putData(a,t[a][0]);this.update()}}st.component=({value:t,onChange:e})=>Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(S.jsx)("textarea",{value:t,rows:10,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value)),disabled:!0})]});var ot=st;class at extends d.c.Control{constructor(t,e,n,s=!1,o=""){super(e),this.emitter=t,this.key=e,this.component=at.component;const a=n.data[e]||!1;n.data[e]=a,n.data.output=a,this.props={readonly:s,checked:a,title:o,onChange:t=>{this.setValue(!!t),this.emitter.trigger("process")}}}setValue(t){this.props.checked=t,this.putData(this.key,t),this.putData("output",t),this.update()}}at.component=({checked:t,onChange:e,title:n})=>Object(S.jsxs)(S.Fragment,{children:[n&&Object(S.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:n}),Object(S.jsx)("input",{type:"checkbox",checked:t,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(+t.target.checked)})]});var rt=at;class it extends d.c.Control{constructor(t,e,n,s=!1,o="",a=""){super(e),this.emitter=t,this.key=e,this.component=it.component;const r=n.data[e]||"";n.data[e]=r,n.data.output=r,this.props={readonly:s,value:r,title:o,placeHolder:a,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}it.component=({value:t,onChange:e,title:n,placeHolder:s})=>Object(S.jsxs)(S.Fragment,{children:[n&&Object(S.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:n}),Object(S.jsx)("input",{type:"text",value:t,placeholder:s,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value))})]});var ct=it;class lt extends d.c.Component{constructor(t){super("Endpoint"),this.path=["New"],this.data.component=nt,this.stringSocket=t}builder(t){var e;t.data.enabledFlag=null===(e=t.data.enabledFlag)||void 0===e||e;const n=new d.c.Input("content","Content (JSON/HTML)",this.stringSocket);return n.addControl(new ct(this.editor,"content",t)),t.addInput(n).addControl(new ot(this.editor,"endpoint",t,!0)).addControl(new rt(this.editor,"enabledFlag",t,!1,"Enabled")).addControl(new ct(this.editor,"path",t,!1,"Path","/foo"))}worker(t,e,n){const s=e.content.length?e.content[0]:"Rendering...",o=(t=>{if(t)return"html"===t.output?"text/html; charset=utf-8":"json"===t.output?"application/json; charset=utf-8":"text/plain; charset=utf-8"})(t.inputs.content.connections[0]),a=t.data.enabledFlag,r=t.data.path;this.editor.nodes.find((e=>e.id===t.id)).controls.get("endpoint").setValue(e,s,o,a,r)}}var dt=lt;class ut extends u.b{render(){const t=this.props,e=t.node,n=t.bindSocket,s=t.bindControl,o=this.state,a=o.outputs,r=o.controls,i=o.inputs,c=o.selected;return Object(S.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(S.jsx)("div",{className:"title",children:e.name}),a.map((t=>Object(S.jsxs)("div",{className:"output",children:[Object(S.jsx)("div",{className:"output-title",children:t.name}),Object(S.jsx)(u.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key))),r.map((t=>Object(S.jsx)(u.a,{className:"control",control:t,innerRef:s},t.key))),i.map((t=>Object(S.jsxs)("div",{className:"input",children:[Object(S.jsx)(u.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(S.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(S.jsx)(u.a,{className:"input-control",control:t.control,innerRef:s})]},t.key)))]})}}class pt extends d.c.Component{constructor(t){super("API"),this.path=["New"],this.data.component=ut,this.jsonSocket=t}builder(t){const e=new d.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new d.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new ct(this.editor,"url",t,!1,"URL","https://example.com/bar")).addOutput(n)}worker(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.url=t.data.url}}var ht=pt;class mt extends u.b{render(){const t=this.props,e=t.node,n=t.bindSocket,s=t.bindControl,o=this.state,a=o.outputs,r=o.controls,i=o.inputs,c=o.selected;return Object(S.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(S.jsx)("div",{className:"title",children:e.name}),a.map((t=>Object(S.jsxs)("div",{className:"output",children:[Object(S.jsx)("div",{className:"output-title",children:t.name}),Object(S.jsx)(u.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key))),r.map((t=>Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(u.a,{className:"control",control:t,innerRef:s},t.key),"db"===t.key&&Object(S.jsxs)("div",{class:"control",title:"pass",children:[Object(S.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"DB_PASS"}),Object(S.jsx)("textarea",{rows:"3",placeholder:"set ".concat(""===t.props.value?"DB":t.props.value.toUpperCase(),"_PASS when tuna api starting"),value:"",disabled:!0})]})]}))),i.map((t=>Object(S.jsxs)("div",{className:"input",children:[Object(S.jsx)(u.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(S.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(S.jsx)(u.a,{className:"input-control",control:t.control,innerRef:s})]},t.key)))]})}}class jt extends d.c.Component{constructor(t,e){super("DB"),this.path=["New"],this.data.component=mt,this.jsonSocket=t,this.sqlSocket=e}builder(t){const e=new d.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new d.c.Output("json","JSON",this.jsonSocket),s=new d.c.Input("sql","SQL",this.sqlSocket);return t.addInput(s).addInput(e).addControl(new ct(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new ct(this.editor,"port",t,!1,"PORT","3306")).addControl(new ct(this.editor,"user",t,!1,"USER","guest")).addControl(new ct(this.editor,"db",t,!1,"DB_NAME","foo")).addOutput(n)}worker(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db}}var gt=jt,bt=n(70),vt=n.n(bt),xt=n(140);function Ot(){return(Ot=Object(l.a)(c.a.mark((function t(e){var n,s,o,a,r,i,j,x,y,f,C,N,S,E,D,F;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new d.c.Socket("String value"),(s=new d.c.Socket("Json value")).combineWith(n),(o=new d.c.Socket("Template value")).combineWith(n),(a=new d.c.Socket("Handlebars value")).combineWith(o),(r=new d.c.Socket("Pug value")).combineWith(o),(i=new d.c.Socket("HTML value")).combineWith(n),j=new d.c.Socket("SQL value"),x=[new dt(n),new L(s),new W(s,o,i),new X(a),new et(r),new P(j),new ht(s),new gt(s,j)],y=window.navigator.userAgent.toLowerCase(),f=-1!==y.indexOf("mac os x"),C=()=>{const t=document.activeElement.nodeName;return"TEXTAREA"===t||"INPUT"===t},(N=new d.c.NodeEditor("tuna-mayonnaise@0.0.1",e)).use(p.a),N.use(u.d),t.t0=N,t.t1=m.a,t.t2={Arrange(){N.nodes.forEach((t=>{N.trigger("arrange",t)}))},Undo(){N.trigger("undo")},Redo(){N.trigger("redo")},Save(){vt.a.post("/regist",N.toJSON()).then((()=>w.b.success("SAVED :)"))).catch((()=>w.b.error("NOT CONNECTED :(")))},Download(){S=new Blob([JSON.stringify(N.toJSON())],{type:"application/json;charset=utf-8"}),Object(xt.saveAs)(S,"tuna-mayonnaise.json")},Debug(){console.log(JSON.stringify(N.toJSON()))}},t.t3={searchBar:!1,delay:100,allocate:t=>t.path,rename:t=>t.name,items:t.t2},t.t0.use.call(t.t0,t.t1,t.t3),N.on("zoom",(({source:t})=>"dblclick"!==t&&"wheel"===t&&!C())),N.use(k.a,{keyboard:!0}),N.on("keydown",(t=>{if(!C())switch(t.code){case"Delete":case"Backspace":return N.selected.each((t=>{N.removeNode(t)})),void N.selected.clear();case"Space":const t=N.view.container.getBoundingClientRect(),e=new MouseEvent("contextmenu",{clientX:t.left+t.width/2,clientY:t.top+t.height/2});return void N.trigger("contextmenu",{e:e,view:N.view})}if(f&&t.metaKey)switch(t.code){case"KeyY":return void N.trigger("redo");case"KeyZ":return void(t.shiftKey?N.trigger("redo"):N.trigger("undo"))}})),N.use(g.a),N.use(b.a,{type:b.a.DEFAULT,transformer:()=>([t,e,n,s])=>[[t,e],[n,s]],curve:b.a.curveBundle,options:{vertical:!1,curvature:.4},arrow:{color:"steelblue",marker:"M-5,-10 L-5,10 L20,0 z"}}),N.use(v.a),N.use(O.a,{margin:{x:200,y:50},depth:0}),E=new d.c.Engine("tuna-mayonnaise@0.0.1"),x.forEach((t=>{N.register(t),E.register(t)})),t.next=35,vt.a.get("/tuna-configuration").then((t=>t.data)).catch((()=>(document.getElementsByClassName("rightClick")[0].style.display="block",null)));case 35:if(null===(D=t.sent)){t.next=42;break}return t.next=39,N.fromJSON(D);case 39:w.b.success("RESUMED :)"),t.next=47;break;case 42:return t.next=44,x[0].createNode();case 44:(F=t.sent).position=[1e3,200],N.addNode(F);case 47:N.on("showcontextmenu",(({e:t,node:e})=>(document.getElementsByClassName("rightClick")[0].style.display="none",!0))),N.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(l.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelectorAll(".editorTextarea").forEach((t=>{t.addEventListener("wheel",(e=>{C()&&(t.parentElement.parentElement.scrollTop+=e.deltaY)}))})),t.next=3,E.abort();case 3:return t.next=5,E.process(N.toJSON());case 5:case"end":return t.stop()}}),t)})))),N.view.resize(),N.trigger("process"),h.a.zoomAt(N,N.nodes);case 52:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(382),n(383);function kt(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(w.a,{}),Object(S.jsx)("img",{className:"rightClick",src:"right-click.svg",width:"200",height:"200",alt:"RightClick for Menu",style:{display:"none",position:"absolute",top:"25%",left:"25%"}}),Object(S.jsx)("div",{style:{width:"100vh",height:"100vh"},ref:t=>t&&function(t){return Ot.apply(this,arguments)}(t)})]})}const wt=document.getElementById("root");r.a.render(Object(S.jsx)(kt,{}),wt)}},[[384,1,2]]]);