(this["webpackJsonptuna-mayonnaise-ui"]=this["webpackJsonptuna-mayonnaise-ui"]||[]).push([[0],{108:function(t,e){},150:function(t,e){},188:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=188},189:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=189},375:function(t,e,n){},376:function(t,e,n){"use strict";n.r(e);n(2);var o=n(20),s=n.n(o),a=n(3),r=n.n(a),c=n(65),i=n(1),u=n(5),d=n(125),l=n(126),p=n(137),h=n(128),m=n.n(h),g=n(129),b=n(130),v=n.n(b),j=n(44),k=n(131),x=n(132),w=n.n(x),O=n(133),y=n(27),f=n(0);class C extends i.c.Control{constructor(t,e,n,o=!1,s="",a=""){super(e),this.emitter=t,this.key=e,this.component=C.component;const r=n.data[e]||"";n.data[e]=r,n.data.output=r,this.props={readonly:o,value:r,title:s,placeHolder:a,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}C.component=({value:t,onChange:e,title:n,placeHolder:o})=>Object(f.jsxs)(f.Fragment,{children:[n&&Object(f.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:n}),Object(f.jsx)("input",{type:"text",value:t,placeholder:o,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value))})]});var S=C;class N extends i.c.Component{constructor(t){super("Text"),this.path=["[ Input ]"],this.socket=t}builder(t){const e=new i.c.Output("text","Text",this.socket);return t.addControl(new S(this.editor,"text",t)).addOutput(e)}worker(t,e,n){n.text=t.data.text}}var D=N;class E extends i.c.Control{constructor(t,e,n,o=!1){super(e),this.emitter=t,this.key=e,this.component=E.component;const s=n.data[e]||'{"name": "value"}';n.data[e]=s,n.data.output=s,this.props={readonly:o,value:s,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}E.component=({value:t,onChange:e})=>Object(f.jsx)("textarea",{value:t,rows:10,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value))});var T=E;class L extends i.c.Component{constructor(t){super("JSON"),this.path=["[ Input ]"],this.socket=t}builder(t){const e=new i.c.Output("json","JSON",this.socket);return t.addControl(new T(this.editor,"json",t)).addOutput(e)}worker(t,e,n){n.json=t.data.json}}var R=L;class J extends u.b{render(){const t=this.props,e=t.bindSocket,n=t.bindControl,o=this.state,s=o.outputs,a=o.controls,r=o.inputs,c=o.selected;return Object(f.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(f.jsx)("div",{className:"title",children:"Template"}),s.map((t=>Object(f.jsxs)("div",{className:"output",children:[Object(f.jsx)("div",{className:"output-title",children:t.name}),Object(f.jsx)(u.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key))),a.map((t=>Object(f.jsx)(u.a,{className:"control",control:t,innerRef:n},t.key))),r.map((t=>Object(f.jsxs)("div",{className:"input",children:[Object(f.jsx)(u.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(f.jsx)("div",{className:"input-title",children:t.name})]},t.key)))]})}}class P extends i.c.Control{constructor(t,e,n,o=!1){super(e),this.emitter=t,this.keys=[],this.component=P.component,this.props={readonly:o,value:"",onChange:()=>{}},n.data.output=""}setValue(t,e,n){this.props.value=e,this.putData("output",e),this.putData("contentType",n);for(const o in t)t[o][0]&&this.putData(o,t[o][0]);this.update()}}P.component=({value:t,onChange:e})=>Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(f.jsx)("textarea",{value:t,rows:10,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value)),disabled:!0})]});var I=P,V=n(134),A=n(135),F=n.n(A);class U extends i.c.Component{constructor(t,e,n){super("Template"),this.path=["[ Template ]"],this.data.component=J,this.dataSocket=t,this.templateSocket=e,this.htmlSocket=n}builder(t){const e=new i.c.Input("template","TemplateEngine",this.templateSocket),n=new i.c.Input("json","Data (JSON)",this.dataSocket),o=new i.c.Output("html","HTML",this.htmlSocket);return n.addControl(new T(this.editor,"json",t)),t.addInput(e).addInput(n).addControl(new I(this.editor,"template",t,!0)).addOutput(o)}worker(t,e,n){const o=e.json.length?e.json[0]:t.data.json,s=t.inputs.template.connections.filter((t=>"hbs"===(null===t||void 0===t?void 0:t.output)||"pug"===(null===t||void 0===t?void 0:t.output))),a=(()=>{var n;if(0===s.length)return"No TemplateEngine detected...";const a=s[0].output,r=(null===(n=e.template)||void 0===n?void 0:n.length)?e.template[0]:t.data.json;if("pug"===a)return V.render(r,JSON.parse(o));if("hbs"===a){return F.a.compile(r)(JSON.parse(o))}})();this.editor.nodes.find((e=>e.id===t.id)).controls.get("template").setValue(e,a,"text/html; charset=utf-8"),n.html=a}}var H=U;class M extends i.c.Control{constructor(t,e,n,o=!1){super(e),this.emitter=t,this.key=e,this.component=M.component;const s=n.data[e]||"<div>{{name}}</div>";n.data[e]=s,n.data.output=s,this.props={readonly:o,value:s,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}M.component=({value:t,onChange:e})=>Object(f.jsx)("textarea",{value:t,rows:10,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value))});var B=M;class W extends i.c.Component{constructor(t){super("Handlebars"),this.path=["[ Template ]"],this.socket=t}builder(t){const e=new i.c.Output("hbs","Handlebars",this.socket);return t.addControl(new B(this.editor,"hbs",t)).addOutput(e)}worker(t,e,n){n.hbs=t.data.hbs}}var K=W;class _ extends i.c.Control{constructor(t,e,n,o=!1){super(e),this.emitter=t,this.key=e,this.component=_.component;const s=n.data[e]||"div #{name}";n.data[e]=s,n.data.output=s,this.props={readonly:o,value:s,onChange:t=>{this.setValue(t),this.emitter.trigger("process")}}}setValue(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}_.component=({value:t,onChange:e})=>Object(f.jsx)("textarea",{value:t,rows:10,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value))});var z=_;class Y extends i.c.Component{constructor(t){super("Pug"),this.path=["[ Template ]"],this.socket=t}builder(t){const e=new i.c.Output("pug","Pug",this.socket);return t.addControl(new z(this.editor,"pug",t)).addOutput(e)}worker(t,e,n){n.pug=t.data.pug}}var Z=Y;class q extends i.c.Control{constructor(t,e,n,o=!1,s=""){super(e),this.emitter=t,this.key=e,this.component=q.component;const a=n.data[e]||!1;n.data[e]=a,n.data.output=a,this.props={readonly:o,checked:a,title:s,onChange:t=>{this.setValue(!!t),this.emitter.trigger("process")}}}setValue(t){this.props.checked=t,this.putData(this.key,t),this.putData("output",t),this.update()}}q.component=({checked:t,onChange:e,title:n})=>Object(f.jsxs)(f.Fragment,{children:[n&&Object(f.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:n}),Object(f.jsx)("input",{type:"checkbox",checked:t,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(+t.target.checked)})]});var G=q;class Q extends i.c.Component{constructor(t){super("Boolean"),this.path=["[ Input ]"],this.socket=t}builder(t){const e=new i.c.Output("boolean","Boolean",this.socket);return t.addControl(new G(this.editor,"boolean",t)).addOutput(e)}worker(t,e,n){n.boolean=t.data.boolean}}var X=Q;class $ extends u.b{render(){const t=this.props,e=t.bindSocket,n=t.bindControl,o=this.state,s=o.outputs,a=o.controls,r=o.inputs,c=o.selected;return Object(f.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(f.jsx)("div",{className:"title",children:"Endpoint"}),s.map((t=>Object(f.jsxs)("div",{className:"output",children:[Object(f.jsx)("div",{className:"output-title",children:t.name}),Object(f.jsx)(u.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key))),a.map((t=>Object(f.jsx)(u.a,{className:"control",control:t,innerRef:n},t.key))),r.map((t=>Object(f.jsxs)("div",{className:"input",children:[Object(f.jsx)(u.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(f.jsx)("div",{className:"input-title",children:t.name})]},t.key)))]})}}class tt extends i.c.Control{constructor(t,e,n,o=!1){super(e),this.emitter=t,this.component=tt.component,this.props={readonly:o,value:"",onChange:()=>{}},n.data.output=""}setValue(t,e,n,o,s){this.props.value=e,this.putData("enabledFlag",o),this.putData("output",e),this.putData("contentType",n),this.putData("path",s);for(const a in t)t[a][0]&&this.putData(a,t[a][0]);this.update()}}tt.component=({value:t,onChange:e})=>Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(f.jsx)("textarea",{value:t,rows:10,ref:t=>{t&&t.addEventListener("pointerdown",(t=>t.stopPropagation()))},onChange:t=>e(String(t.target.value)),disabled:!0})]});var et=tt;class nt extends i.c.Component{constructor(t){super("Endpoint"),this.path=["[ Endpoint ]"],this.data.component=$,this.stringSocket=t}builder(t){var e;t.data.enabledFlag=null===(e=t.data.enabledFlag)||void 0===e||e;const n=new i.c.Input("content","Content (JSON/HTML)",this.stringSocket);return n.addControl(new S(this.editor,"content",t)),t.addInput(n).addControl(new et(this.editor,"endpoint",t,!0)).addControl(new G(this.editor,"enabledFlag",t,!1,"Enabled")).addControl(new S(this.editor,"path",t,!1,"Path","/foo"))}worker(t,e,n){const o=e.content.length?e.content[0]:"Rendering...",s=(t=>{if(t)return"html"===t.output?"text/html; charset=utf-8":"json"===t.output?"application/json; charset=utf-8":"text/plain; charset=utf-8"})(t.inputs.content.connections[0]),a=t.data.enabledFlag,r=t.data.path;this.editor.nodes.find((e=>e.id===t.id)).controls.get("endpoint").setValue(e,o,s,a,r)}}var ot=nt;class st extends i.c.Component{constructor(t){super("Path"),this.path=["[ Input ]"],this.socket=t}builder(t){const e=new i.c.Output("path","Path",this.socket);return t.addControl(new S(this.editor,"path",t)).addOutput(e)}worker(t,e,n){n.path=t.data.path}}var at=st;class rt extends u.b{render(){const t=this.props,e=t.node,n=t.bindSocket,o=t.bindControl,s=this.state,a=s.outputs,r=s.controls,c=s.inputs,i=s.selected;return Object(f.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(f.jsx)("div",{className:"title",children:e.name}),a.map((t=>Object(f.jsxs)("div",{className:"output",children:[Object(f.jsx)("div",{className:"output-title",children:t.name}),Object(f.jsx)(u.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key))),r.map((t=>Object(f.jsx)(u.a,{className:"control",control:t,innerRef:o},t.key))),c.map((t=>Object(f.jsxs)("div",{className:"input",children:[Object(f.jsx)(u.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(f.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(f.jsx)(u.a,{className:"input-control",control:t.control,innerRef:o})]},t.key)))]})}}class ct extends i.c.Component{constructor(t,e){super("API"),this.path=["[ Seed ]"],this.data.component=rt,this.urlSocket=t,this.jsonSocket=e}builder(t){const e=new i.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new i.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new S(this.editor,"url",t,!1,"URL","https://example.com/bar")).addOutput(n)}worker(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.url=t.data.url}}var it=ct;class ut extends i.c.Component{constructor(t){super("URL"),this.path=["[ Input ]"],this.socket=t}builder(t){const e=new i.c.Output("url","URL",this.socket);return t.addControl(new S(this.editor,"url",t)).addOutput(e)}worker(t,e,n){n.url=t.data.url}}var dt=ut,lt=n(66),pt=n.n(lt),ht=n(136);function mt(){return(mt=Object(c.a)(r.a.mark((function t(e){var n,o,s,a,h,b,x,f,C,S,N,E,T,L,J,P;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new i.c.Socket("String value"),o=new i.c.Socket("Boolean value"),(s=new i.c.Socket("Text value")).combineWith(n),(a=new i.c.Socket("Json value")).combineWith(n),(h=new i.c.Socket("Template value")).combineWith(n),(b=new i.c.Socket("Handlebars value")).combineWith(h),(x=new i.c.Socket("Pug value")).combineWith(h),(f=new i.c.Socket("HTML value")).combineWith(n),C=new i.c.Socket("Path value"),S=new i.c.Socket("URL value"),N=[new ot(n),new D(s),new R(a),new H(a,h,f),new K(b),new Z(x),new X(o),new at(C),new it(S,a),new dt(S)],(E=new i.c.NodeEditor("tuna-mayonnaise@0.0.1",e)).use(d.a),E.use(u.d),t.t0=E,t.t1=p.a,t.t2={Arrange(){E.nodes.forEach((t=>{E.trigger("arrange",t)}))},Undo(){E.trigger("undo")},Redo(){E.trigger("redo")},Save(){pt.a.post("/regist",E.toJSON()).then((()=>y.b.success("This configuration is SAVED :)"))).catch((()=>y.b.error("Maybe tuna tool command is TERMINATED :(")))},Download(){T=new Blob([JSON.stringify(E.toJSON())],{type:"application/json;charset=utf-8"}),Object(ht.saveAs)(T,"tuna-mayonnaise.json")},Debug(){console.log(JSON.stringify(E.toJSON()))}},t.t3={searchBar:!1,delay:100,allocate:t=>t.path,rename:t=>t.name,items:t.t2},t.t0.use.call(t.t0,t.t1,t.t3),E.use(m.a),E.use(g.a,{margin:20}),E.use(v.a),E.use(j.a,{type:j.a.DEFAULT,transformer:()=>([t,e,n,o])=>[[t,e],[n,o]],curve:j.a.curveBundle,options:{vertical:!1,curvature:.4},arrow:{color:"steelblue",marker:"M-5,-10 L-5,10 L20,0 z"}}),E.use(k.a),E.use(w.a,{margin:{x:200,y:50},depth:0}),E.use(O.a,{keyboard:!0}),-1!==window.navigator.userAgent.toLowerCase().indexOf("mac os x")&&document.addEventListener("keydown",(t=>{if(t.metaKey)switch(t.code){case"KeyY":E.trigger("redo");break;case"KeyZ":t.shiftKey?E.trigger("redo"):E.trigger("undo")}})),L=new i.c.Engine("tuna-mayonnaise@0.0.1"),N.forEach((t=>{E.register(t),L.register(t)})),t.next=38,pt.a.get("/tuna-configuration").then((t=>t.data)).catch((()=>null));case 38:if(null===(J=t.sent)){t.next=45;break}return t.next=42,E.fromJSON(J);case 42:y.b.success("Previous configuration is RESTORED :)"),t.next=50;break;case 45:return t.next=47,N[0].createNode();case 47:(P=t.sent).position=[1e3,200],E.addNode(P);case 50:E.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("process"),t.next=3,L.abort();case 3:return t.next=5,L.process(E.toJSON());case 5:case"end":return t.stop()}}),t)})))),E.view.resize(),E.trigger("process"),l.a.zoomAt(E,E.nodes);case 54:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(374),n(375);function gt(){return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(y.a,{}),Object(f.jsx)("div",{style:{width:"100vh",height:"100vh"},ref:t=>t&&function(t){return mt.apply(this,arguments)}(t)})]})}const bt=document.getElementById("root");s.a.render(Object(f.jsx)(gt,{}),bt)}},[[376,1,2]]]);