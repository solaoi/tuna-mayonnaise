(this["webpackJsonptuna-mayonnaise-ui"]=this["webpackJsonptuna-mayonnaise-ui"]||[]).push([[0],{110:function(t,e){},174:function(t,e){},213:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=213},214:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=214},324:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),o=n(23),s=n.n(o),c=n(44),i=n.n(c),u=n(11),l=n(9),p=n(66),d=n(7),h=n.n(d),j=n(2),m=n(8),f=n(121),v=n(122),b=n(132),O=n(125),g=n.n(O),y=n(48),x=n(126),k=n(127),C=n.n(k),N=n(128),w=n(67),S=n.n(w),I=n(129),F=n(3),E=n(4),M=n(6),T=n(5),D=n(24),J=n.n(D),P=n(19),A=(n(167),n(40),n(130)),L=n(326),R=n(0),B=function(t){var e=t.value,n=t.onChange,r=Object(a.useState)(e),o=Object(l.a)(r,2),s=o[0],c=o[1],i=Object(a.useState)(!1),p=Object(l.a)(i,2),d=p[0],h=p[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),f=m[0],v=m[1];return Object(L.a)((function(){null!==f&&(u.b.error(f),v(null))}),1e4),Object(R.jsx)(J.a,{value:s,onValueChange:function(t){try{A.parse(t),h(!1),v(null)}catch(e){v(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(P.highlight)(t,P.languages.json)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"300px"}})},V=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var c=r.data[a]||'{"name": "value"}';return r.data[a]=c,r.data.output=c,o.props={readonly:s,value:c,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);V.component=function(t){var e=t.value,n=t.onChange;return Object(R.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(R.jsx)(B,{value:e,onChange:function(t){return n(t)}})})};var _=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"JSON")).path=["New"],a.socket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("json","JSON",this.socket);return t.addControl(new V(this.editor,"json",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.json=t.data.json}}]),n}(j.c.Component),q=(n(169),n(131)),H=function(t){var e=t.value,n=t.onChange,r=Object(a.useState)(e),o=Object(l.a)(r,2),s=o[0],c=o[1],i=Object(a.useState)(!1),p=Object(l.a)(i,2),d=p[0],h=p[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),f=m[0],v=m[1];return Object(L.a)((function(){null!==f&&(u.b.error(f),v(null))}),1e4),Object(R.jsx)(J.a,{value:s,onValueChange:function(t){try{q.parse(t),h(!1),v(null)}catch(e){v(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(P.highlight)(t,P.languages.sql)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"300px"}})},K=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var c=r.data[a]||"SELECT * FROM users";return r.data[a]=c,r.data.output=c,o.props={readonly:s,value:c,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);K.component=function(t){var e=t.value,n=t.onChange;return Object(R.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(R.jsx)(H,{value:e,onChange:function(t){return n(t)}})})};var U=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"SQL")).path=["New"],a.socket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("sql","SQL",this.socket);return t.addControl(new K(this.editor,"sql",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.sql=t.data.sql}}]),n}(j.c.Component),W=n(46),z=n(47),Y=n.n(z),$=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,r=a.outputs,o=a.controls,s=a.inputs,c=a.selected;return Object(R.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(R.jsx)("div",{className:"title",children:"Template"}),r.map((function(t){return Object(R.jsxs)("div",{className:"output",children:[Object(R.jsx)("div",{className:"output-title",children:t.name}),Object(R.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),o.map((function(t){return Object(R.jsx)(m.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(R.jsxs)("div",{className:"input",children:[Object(R.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(R.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(m.b),G=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.keys=[],o.component=n.component,o.props={readonly:s,value:"",onChange:function(){}},r.data.output="",o}return Object(E.a)(n,[{key:"setValue",value:function(t,e,n){var a=this;this.props.value=e,this.putData("output",e),this.putData("contentType",n),Object.entries(t).forEach((function(t){var e=Object(l.a)(t,2),n=e[0],r=e[1];r[0]&&a.putData(n,r[0])})),this.update()}}]),n}(j.c.Control);G.component=function(t){var e=t.value,n=t.onChange;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(R.jsx)("textarea",{value:e,rows:10,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},disabled:!0})]})};var Q=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o;return Object(F.a)(this,n),(o=e.call(this,"Template")).path=["New"],o.data.component=$,o.dataSocket=t,o.templateSocket=a,o.htmlSocket=r,o}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("template","TemplateEngine",this.templateSocket),n=new j.c.Input("json","Data (JSON)",this.dataSocket),a=new j.c.Output("html","HTML",this.htmlSocket);return n.addControl(new V(this.editor,"json",t)),t.addInput(e).addInput(n).addControl(new G(this.editor,"template",t,!0)).addOutput(a)}},{key:"worker",value:function(t,e,n){var a=e.json.length?e.json[0]:t.data.json,r=t.inputs.template.connections.filter((function(t){return"hbs"===(null===t||void 0===t?void 0:t.output)||"pug"===(null===t||void 0===t?void 0:t.output)})),o=function(){var n;if(0===r.length)return"No TemplateEngine detected...";var o=r[0].output,s=null!==(n=e.template)&&void 0!==n&&n.length?e.template[0]:t.data.json;return"pug"===o?W.render(s,JSON.parse(a)):"hbs"===o?Y.a.compile(s)(JSON.parse(a)):"Unknown TemplateEngine detected..."}();this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("template").setValue(e,o,"text/html; charset=utf-8"),n.html=o}}]),n}(j.c.Component),X=(n(119),n(120),n(321),function(t){var e=t.value,n=t.onChange,r=Object(a.useState)(e),o=Object(l.a)(r,2),s=o[0],c=o[1],i=Object(a.useState)(!1),p=Object(l.a)(i,2),d=p[0],h=p[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),f=m[0],v=m[1];return Object(L.a)((function(){null!==f&&(u.b.error(f),v(null))}),1e4),Object(R.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(R.jsx)(J.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:s,onValueChange:function(t){try{Y.a.precompile(t),h(!1),v(null)}catch(e){v(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(P.highlight)(t,P.languages.handlebars).split("\n").map((function(t){return'<span class="container_editor_line_number">'.concat(t,"</span>")})).join("\n")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"800px"}})})}),Z=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var c=r.data[a]||"<div>{{name}}</div>";return r.data[a]=c,r.data.output=c,o.props={readonly:s,value:c,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);Z.component=function(t){var e=t.value,n=t.onChange;return Object(R.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(R.jsx)(X,{value:e,onChange:function(t){return n(t)}})})};var tt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"Handlebars")).path=["New"],a.socket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("hbs","Handlebars",this.socket);return t.addControl(new Z(this.editor,"hbs",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.hbs=t.data.hbs}}]),n}(j.c.Component),et=(n(322),function(t){var e=t.value,n=t.onChange,r=Object(a.useState)(e),o=Object(l.a)(r,2),s=o[0],c=o[1],i=Object(a.useState)(!1),p=Object(l.a)(i,2),d=p[0],h=p[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),f=m[0],v=m[1];return Object(L.a)((function(){null!==f&&(u.b.error(f),v(null))}),1e4),Object(R.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(R.jsx)(J.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:s,onValueChange:function(t){try{W.compile(t),h(!1),v(null)}catch(e){v(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(P.highlight)(t,P.languages.pug).split("\n").map((function(t){return'<span class="container_editor_line_number">'.concat(t,"</span>")})).join("\n")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"800px"}})})}),nt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var c=r.data[a]||"div #{name}";return r.data[a]=c,r.data.output=c,o.props={readonly:s,value:c,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);nt.component=function(t){var e=t.value,n=t.onChange;return Object(R.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(R.jsx)(et,{value:e,onChange:function(t){return n(t)}})})};var at=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"Pug")).path=["New"],a.socket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("pug","Pug",this.socket);return t.addControl(new nt(this.editor,"pug",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.pug=t.data.pug}}]),n}(j.c.Component),rt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,r=a.outputs,o=a.controls,s=a.inputs,c=a.selected;return Object(R.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(R.jsx)("div",{className:"title",children:"Endpoint"}),r.map((function(t){return Object(R.jsxs)("div",{className:"output",children:[Object(R.jsx)("div",{className:"output-title",children:t.name}),Object(R.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),o.map((function(t){return Object(R.jsx)(m.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(R.jsxs)("div",{className:"input",children:[Object(R.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(R.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(m.b),ot=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.component=n.component,o.props={readonly:s,value:"",contentType:"",onChange:function(){}},r.data.output="",o}return Object(E.a)(n,[{key:"setValue",value:function(t,e,n,a,r){var o=this;this.props.value=e,this.props.contentType=n,this.putData("enabledFlag",a),this.putData("output",e),this.putData("contentType",n),this.putData("path",r),Object.entries(t).forEach((function(t){var e=Object(l.a)(t,2),n=e[0],a=e[1];a[0]&&o.putData(n,a[0])})),this.update()}}]),n}(j.c.Control);ot.component=function(t){var e=t.value,n=t.contentType,a=t.onChange;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),"text/html; charset=utf-8"===n?Object(R.jsx)("div",{className:"hasScrollbar",style:{backgroundColor:"white",overflowY:"auto",maxHeight:"500px"},dangerouslySetInnerHTML:{__html:e}}):Object(R.jsx)("textarea",{value:e,rows:10,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return a(String(t.target.value))},disabled:!0})]})};var st=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var i=r.data[a]||!1;return r.data[a]=i,r.data.output=i,o.props={readonly:s,checked:i,title:c,onChange:function(t){o.setValue(!!t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.checked=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);st.component=function(t){var e=t.checked,n=t.onChange,a=t.title,r=t.id,o=void 0===r?(new Date).getTime():r;return Object(R.jsxs)(R.Fragment,{children:[a&&Object(R.jsx)("div",{style:{color:"white",textAlign:"left",marginBottom:"5px"},children:a}),Object(R.jsxs)("div",{className:"switchArea",children:[Object(R.jsx)("input",{type:"checkbox",id:o,checked:e,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(+t.target.checked)}}),Object(R.jsx)("label",{htmlFor:o,children:Object(R.jsx)("span",{})}),Object(R.jsx)("div",{className:"swImg"})]})]})};var ct=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var u=r.data[a]||"";return r.data[a]=u,r.data.output=u,o.props={readonly:s,value:u,title:c,placeHolder:i,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);ct.component=function(t){var e=t.value,n=t.onChange,a=t.title,r=t.placeHolder;return Object(R.jsxs)(R.Fragment,{children:[a&&Object(R.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(R.jsx)("input",{type:"text",value:e,placeholder:r,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))}})]})};var it=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var p=r.data[a]||"/foo";return r.data[a]=p,r.data.output=p,o.props={readonly:s,value:p,title:c,placeHolder:i,warn:l,onChange:function(t){""===t?o.props.warn=!0:"/metrics"===t||"/health"===t?(o.props.warn=!0,u.b.error("this Path is reserved, use another Path.")):o.props.warn=!1,o.setValue(t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);it.component=function(t){var e=t.value,n=t.onChange,a=t.title,r=t.placeHolder,o=t.warn;return Object(R.jsxs)(R.Fragment,{children:[a&&Object(R.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(R.jsx)("input",{type:"text",value:e,placeholder:r,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},style:{background:o?"rgba(255, 0, 80, 0.7)":"#FFF"}})]})};var ut=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var l=r.data[a]||i;return r.data[a]=l,r.data.output=l,o.props={readonly:s,value:l,title:c,disabled:u,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.value=t,this.props.disabled=e,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);ut.component=function(t){var e=t.value,n=t.onChange,a=t.title,r=t.disabled;return Object(R.jsxs)(R.Fragment,{children:[a&&Object(R.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(R.jsx)("input",{type:"number",value:e,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(+t.target.value)},disabled:r})]})};var lt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var o,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(F.a)(this,n),(o=e.call(this,a)).emitter=t,o.key=a,o.component=n.component;var l=r.data[a]||i[0];return r.data[a]=l,r.data.output=l,o.props={readonly:s,value:l,title:c,values:i,disabled:u,onChange:function(t){o.setValue(t),o.emitter.trigger("process")}},o}return Object(E.a)(n,[{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.props.value=t,this.props.disabled=e,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);lt.component=function(t){var e=t.title,n=t.value,a=t.values,r=t.onChange,o=t.disabled;return Object(R.jsxs)(R.Fragment,{children:[e&&Object(R.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:e}),Object(R.jsx)("select",{style:{width:"100%"},value:n,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return r(String(t.target.value))},disabled:o,children:a.map((function(t,e){return Object(R.jsx)("option",{value:t,children:t},"".concat(t,"_").concat(e))}))})]})};var pt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"Endpoint")).path=["New"],a.data.component=rt,a.stringSocket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e;t.data.enabledFlag=null===(e=t.data.enabledFlag)||void 0===e||e;var n=new j.c.Input("content","Content (JSON/HTML)",this.stringSocket);return n.addControl(new ct(this.editor,"content",t)),t.addInput(n).addControl(new ot(this.editor,"endpoint",t,!0)).addControl(new st(this.editor,"enabledFlag",t,!1,"Enabled")).addControl(new lt(this.editor,"method",t,!1,"Method",["GET","POST","PUT","PATCH","DELETE","OPTIONS"])).addControl(new it(this.editor,"path",t,!1,"Path","/foo")).addControl(new st(this.editor,"ratelimitEnableFlag",t,!1,"RateLimit")).addControl(new lt(this.editor,"ratelimitUnit",t,!1,"Unit",["any","ip"])).addControl(new ut(this.editor,"ratelimitLimit",t,!1,"Limit",30)).addControl(new ut(this.editor,"ratelimitBurst",t,!1,"Burst",0)).addControl(new ut(this.editor,"ratelimitExpireSecond",t,!1,"ExpireSecond",60))}},{key:"worker",value:function(t,e){var n=this,a=e.content.length?e.content[0]:"Rendering...",r=function(t){if(t){if("html"===t.output)return"text/html; charset=utf-8";if("json"===t.output)return"application/json; charset=utf-8"}return"text/plain; charset=utf-8"}(t.inputs.content.connections[0]),o=t.data.enabledFlag,s=t.data.path;this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("endpoint").setValue(e,a,r,o,s),["ratelimitUnit","ratelimitLimit","ratelimitBurst","ratelimitExpireSecond"].forEach((function(e){n.editor.nodes.find((function(e){return e.id===t.id})).controls.get(e).setValue(t.data[e],!t.data.ratelimitEnableFlag)}))}}]),n}(j.c.Component),dt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,r=a.outputs,o=a.controls,s=a.inputs,c=a.selected;return Object(R.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(R.jsx)("div",{className:"title",children:"JSONManager"}),r.map((function(t){return Object(R.jsxs)("div",{className:"output",children:[Object(R.jsx)("div",{className:"output-title",children:t.name}),Object(R.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),o.map((function(t){return Object(R.jsx)(m.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(R.jsxs)("div",{className:"input jsonManagerInput",children:[Object(R.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(R.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(m.b),ht=n(36),jt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var s,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(F.a)(this,n),(s=e.call(this,a)).emitter=t,s.component=n.component,s.props={readonly:c,inputs:[],inputIds:[],outputs:o.data.output?JSON.parse(o.data.output):[],state:{pointerPos:{x:0,y:0},drag:{},selectedElement:{}},isDroppable:!1,onPointerOver:function(){s.props.isDroppable=!0},onPointerOut:function(){s.props.isDroppable=!1},onPointerDown:function(t){var e=t.currentTarget;s.props.state.pointerPos.x=t.clientX,s.props.state.pointerPos.y=t.clientY,s.props.state.selectedElement=e;var n=e.cloneNode(!0),a=n.style;a.transition="",a.pointerEvents="none",a.display="none",a.position="absolute";var r=document.getElementsByClassName("minimap")[0].previousElementSibling.style.transform.match(/^.*scale\((.*)\)$/)[1],o=(e.getBoundingClientRect().left-e.closest(".jsonManagerCtrl").getBoundingClientRect().left)/r+10;a.left="".concat(o,"px"),e.after(n);var c=e.getBoundingClientRect(),i={x:c.left,y:c.top};s.props.state.drag={dragElement:n,position:i},e.classList.remove("jsonManagerCtrlInputKeyHover");var u=e.closest(".node");u.style.cursor="grabbing",u.addEventListener("pointerup",s.props.onPointerUp),u.addEventListener("pointermove",s.props.onPointerMove)},onPointerMove:function(t){t.stopPropagation();var e=document.getElementsByClassName("minimap")[0].previousElementSibling.style.transform.match(/^.*scale\((.*)\)$/)[1],n=t.clientX,a=t.clientY,r=s.props.state,o=r.drag,c=r.pointerPos,i=(n-c.x)/e,u=(a-c.y)/e,l=o.dragElement.style;l.display="inline-block",l.zIndex="100",l.transform="translate(".concat(i,"px,").concat(u,"px)")},onPointerUp:function(){var t=s.props.state,e=t.drag,n=t.selectedElement;s.props.state.drag=null,n.classList.add("jsonManagerCtrlInputKeyHover");var a=n.closest(".node");if(a.style.cursor="pointer",a.removeEventListener("pointerup",s.props.onPointerUp),a.removeEventListener("pointermove",s.props.onPointerMove),s.props.isDroppable){var r=parseInt(n.dataset.idx,10),o=parseInt(n.dataset.nodeid,10),c=n.innerText;if("func"!==n.dataset.type)1===s.props.outputs.filter((function(t){return t.key===c})).length?s.props.outputs=s.props.outputs.map((function(t){return t.key===c?{srcId:o,srcIds:"",src:r,key:t.key,value:JSON.stringify(JSON.parse(s.props.inputs[r])[t.key])}:t})):s.props.outputs.push({srcId:o,srcIds:"",src:r,key:c,value:JSON.stringify(JSON.parse(s.props.inputs[r])[c])});else{var i=s.props.outputFunctions[r].params,u=s.props.functions.filter((function(t){return t.name===s.props.outputFunctions[r].func}))[0],l=u.paramCount,p=u.logic,d=function(){if(i[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(i[0]),e=t[1],n=t[4];return n?{p0:JSON.parse(s.props.inputs[e])[n],p0Id:e}:{p0:JSON.parse(s.props.inputs[e]),p0Id:e}}return{p0:i[0],p0Id:null}}(),h=d.p0,j=d.p0Id,m=function(){if(2===l&&i[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(i[1]),e=t[1],n=t[4];return n?{p1:JSON.parse(s.props.inputs[e])[n],p1Id:e}:{p1:JSON.parse(s.props.inputs[e]),p1Id:e}}return{p1:i[1],p1Id:null}}(),f=m.p1,v=m.p1Id,b=1===l?p(h):p(h,f),O=1===l?null!==j?"".concat(j,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(j,"']"))[0].dataset.nodeid,10)):"":null==j&&null==v?"":null==j?"".concat(v,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(v,"']"))[0].dataset.nodeid,10)):"".concat(j,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(j,"']"))[0].dataset.nodeid,10));1===s.props.outputs.filter((function(t){return t.key===c})).length?s.props.outputs=s.props.outputs.map((function(t){return t.key===c?{srcId:-1,srcIds:O,src:-1*(r+1),key:t.key,value:JSON.stringify(b)}:t})):s.props.outputs.push({srcId:-1,srcIds:O,src:-1*(r+1),key:c,value:JSON.stringify(b)})}s.putData("output",JSON.stringify(s.props.outputs)),s.update(),s.emitter.trigger("process")}e.dragElement.remove()},onClickCloseBtn:function(t){var e=t.currentTarget;s.props.outputs=s.props.outputs.reduce((function(t,n){return n.key===e.dataset.key?t:[].concat(Object(ht.a)(t),[n])}),[]),s.putData("output",JSON.stringify(s.props.outputs)),s.update(),s.emitter.trigger("process")},isModalOpen:!1,setModalOpen:function(t){s.props.isModalOpen=t,s.update(),s.emitter.trigger("process")},outputFunctions:Array.isArray(o.data.outputFunctions)&&0===o.data.outputFunctions.length||!o.data.outputFunctions?[]:JSON.parse(o.data.outputFunctions),functions:[{name:"Naming",paramCount:1,symbol:null,logic:function(t){return t}}],onClickAddBtn:function(t){var e=t.currentTarget.previousElementSibling.value;""!==e&&(s.props.outputFunctions.push({func:e,name:"",params:[],warn:!1}),s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process"))},onClickRemoveBtn:function(t){var e=parseInt(t.currentTarget.dataset.idx,10),n=s.props.outputFunctions[e].name;s.props.outputs=s.props.outputs.filter((function(t){return t.key!==n})),s.props.outputFunctions=s.props.outputFunctions.filter((function(t,n){return n!==e})),s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process")},onChangeModalFunc:function(t){var e=parseInt(t.currentTarget.dataset.idx,10);1===s.props.outputFunctions.filter((function(e){return e.name===t.target.value})).length?s.props.outputFunctions[e].warn=!0:s.props.outputFunctions[e].warn=!1,s.props.outputFunctions[e].name=t.target.value,s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process")},onChangeModalFuncParams:function(t){var e=parseInt(t.currentTarget.dataset.idx,10),n=parseInt(t.currentTarget.dataset.paramsIdx,10);if(2===n&&s.props.outputFunctions[e].params.length<2&&(s.props.outputFunctions[e].params[0]=null),s.props.outputFunctions[e].params[n]=t.target.value,s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.props.outputFunctions[e].name){var a=s.props.outputFunctions[e].name,r=s.props.outputFunctions[e].params,o=s.props.functions.filter((function(t){return t.name===s.props.outputFunctions[e].func}))[0],c=o.paramCount,i=o.logic;if(1===c||r[0]){var u=function(){if(r[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(r[0]),e=t[1],n=t[4];return n?{p0:JSON.parse(s.props.inputs[e])[n],p0Id:e}:{p0:JSON.parse(s.props.inputs[e]),p0Id:e}}return{p0:r[0],p0Id:null}}(),l=u.p0,p=u.p0Id,d=function(){if(2===c&&r[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(r[1]),e=t[1],n=t[4];return n?{p1:JSON.parse(s.props.inputs[e])[n],p1Id:e}:{p1:JSON.parse(s.props.inputs[e]),p1Id:e}}return{p1:r[1],p1Id:null}}(),h=d.p1,j=d.p1Id,m=1===c?i(l):i(l,h),f=1===c?null!==p?"".concat(p,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(p,"']"))[0].dataset.nodeid,10)):"":null==p&&null==j?"":null==p?"".concat(j,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(j,"']"))[0].dataset.nodeid,10)):"".concat(p,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(p,"']"))[0].dataset.nodeid,10));1===s.props.outputs.filter((function(t){return t.key===a})).length&&(s.props.outputs=s.props.outputs.map((function(t){return t.key===a?{srcId:-1,srcIds:f,src:-1*(e+1),key:t.key,value:JSON.stringify(m)}:t})))}}s.update(),s.emitter.trigger("process")},textAreaRef:r.a.createRef(),previewRef:r.a.createRef()},s}return Object(E.a)(n,[{key:"setValue",value:function(t,e){var n=this,a=t.inputs.content.connections.map((function(t){return t.node})),r=e.content;(this.props.inputs=r,this.props.inputIds=a,0===r.length&&(this.props.outputs=[],this.props.outputFunctions=[]),a.length>r.length)?(this.props.outputs=[],this.props.outputFunctions=[]):(r.forEach((function(t,e){return n.props.outputs=n.props.outputs.reduce((function(n,a){if(a.src===e){var r=JSON.parse(t);return Object.keys(r).includes(a.key)?[].concat(Object(ht.a)(n),[{srcId:a.srcId,srcIds:a.srcIds,src:a.src,key:a.key,value:JSON.stringify(r[a.key])}]):n}return[].concat(Object(ht.a)(n),[a])}),[])})),this.props.outputFunctions.filter((function(t){return t.name&&t.params.reduce((function(t,e){return t||e.startsWith("inputs[")}),!1)})).length&&(this.props.outputFunctions.forEach((function(t,e){try{var a=t.name,r=t.params,o=n.props.functions.filter((function(e){return e.name===t.func}))[0],s=o.paramCount,c=o.logic;if(1===s||r[0]){var i=function(){if(void 0!==r[0]&&r[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(r[0]),e=t[1],a=t[4],o=a?JSON.parse(n.props.inputs[e])[a]:JSON.parse(n.props.inputs[e]);if(void 0===o)throw Error;return o}return r[0]}(),u=function(){if(2===s&&void 0!==r[1]&&r[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(r[1]),e=t[1],a=t[4],o=a?JSON.parse(n.props.inputs[e])[a]:JSON.parse(n.props.inputs[e]);if(void 0===o)throw Error;return o}return r[1]}(),l=1===s?c(i):c(i,u);1===n.props.outputs.filter((function(t){return t.key===a})).length&&(n.props.outputs=n.props.outputs.map((function(t){return t.key===a?{srcId:t.srcId,srcIds:t.srcIds,src:t.src,key:t.key,value:JSON.stringify(l)}:t})))}}catch(p){n.props.outputs=n.props.outputs.filter((function(t){return t.key!==n.props.outputFunctions[e].name})),delete n.props.outputFunctions[e]}})),this.props.outputFunctions=this.props.outputFunctions.filter((function(t){return void 0!==t}))));this.putData("output",JSON.stringify(this.props.outputs)),this.update()}}]),n}(j.c.Control);jt.component=function(t){var e=t.inputs,n=t.inputIds,a=t.outputs,r=t.onPointerDown,o=t.onPointerOver,s=t.onPointerOut,c=t.onClickCloseBtn,u=t.isModalOpen,l=t.setModalOpen,p=t.functions,d=t.onClickAddBtn,h=t.onChangeModalFunc,j=t.outputFunctions,m=t.onClickRemoveBtn,f=t.onChangeModalFuncParams,v=t.textAreaRef,b=t.previewRef;return Object(R.jsxs)("div",{className:"jsonManagerCtrl",children:[Object(R.jsxs)(i.a,{isOpen:u,style:{content:{padding:"0px"}},children:[Object(R.jsxs)("div",{className:"jsonManagerModalTitle",children:[Object(R.jsx)("p",{style:{display:"inline-block",fontWeight:"600",fontSize:"18px"},children:"Functions"}),Object(R.jsx)("span",{role:"button",tabIndex:"0",className:"closeBtn",onClick:function(){return l(!1)}})]}),Object(R.jsxs)("div",{className:"jsonManagerModalContent",children:[Object(R.jsxs)("select",{style:{color:"#767676"},ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:[Object(R.jsx)("option",{value:"",style:{display:"none"},children:"Select your function"}),p.map((function(t){return Object(R.jsx)("option",{value:t.name,children:t.name},t.name)}))]}),Object(R.jsx)("div",{role:"button",tabIndex:"0",className:"modalAddBtn",onClick:d,children:"Add"}),j.map((function(t,e){return Object(R.jsxs)("div",{className:"modalFunction",children:[Object(R.jsxs)("p",{className:"modalFunctionTitle",children:[t.func,Object(R.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:m,"data-idx":e})]}),Object(R.jsxs)("div",{className:"modalFunctionKey",children:[Object(R.jsx)("p",{className:"modalFunctionKeyTitle",children:"name:"}),Object(R.jsx)("input",{type:"text",value:t.name,placeholder:"name to use output",ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:h,"data-idx":e,style:{background:t.warn?"rgba(255, 0, 80, 0.7)":"#FFF"}})]}),Object(R.jsxs)("div",{className:"modalFunctionKey",children:[Object(R.jsx)("p",{className:"modalFunctionKeyTitle",children:"params: "}),Object(R.jsx)("div",{className:"modalFunctionContent",children:function(){var n=p.filter((function(e){return e.name===t.func}))[0];return 1===n.paramCount?Object(R.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_0"),placeholder:"Input or Select your param",onChange:f,"data-idx":e,"data-params-idx":0,value:t.params[0]?t.params[0]:""}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_0"),placeholder:"Input or Select your param",onChange:f,"data-idx":e,"data-params-idx":0,value:t.params[0]?t.params[0]:null}),Object(R.jsx)("span",{className:"modalFunctionContentSymbol",children:n.symbol}),Object(R.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_1"),placeholder:"Input or Select your param",onChange:f,"data-idx":e,"data-params-idx":1,value:t.params[1]?t.params[1]:null})]})}()})]})]},"modalFunction_".concat(e))})),Object(R.jsx)("datalist",{id:"inputs-datalist",children:e.map((function(t,e){try{var n=JSON.parse(t);return function(){var t=Array.isArray(n)?[Object(R.jsx)("option",{value:"inputs[".concat(e,"]"),children:"inputs[".concat(e,"]")},"inputs[".concat(e,"]"))]:[];return[].concat(t,Object(ht.a)(Object.keys(n).map((function(t){return Object(R.jsx)("option",{value:"inputs[".concat(e,"].").concat(t),children:"inputs[".concat(e,"].").concat(t)},"inputs[".concat(e,"].").concat(t))}))))}()}catch(a){return""}}))})]})]}),Object(R.jsxs)("div",{className:"jsonManagerCtrlInputs",children:[Object(R.jsxs)("div",{className:"jsonManagerCtrlInput",children:[Object(R.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Inputs"}),e.map((function(t,e){try{var a=JSON.parse(t);return Array.isArray(a)?Object(R.jsxs)("div",{className:"jsonManagerCtrlInputGroup",children:[Object(R.jsxs)("p",{className:"jsonManagerCtrlInputTitle",children:["inputs[",e,"]"]}),Object(R.jsx)("p",{className:"jsonManagerCtrlInputKey","data-nodeid":n[e],children:"Array"})]},"jsonManagerCtrlInputGroup_".concat(e)):Object(R.jsxs)("div",{className:"jsonManagerCtrlInputGroup",children:[Object(R.jsxs)("p",{className:"jsonManagerCtrlInputTitle",children:["inputs[",e,"]"]}),Object.keys(a).map((function(t,a){return Object(R.jsx)("p",{className:"jsonManagerCtrlInputKey jsonManagerCtrlInputKeyHover",onPointerDown:r,"data-idx":e,"data-nodeid":n[e],children:t},"jsonManagerCtrlInputKey_".concat(a))}))]},"jsonManagerCtrlInputGroup_".concat(e))}catch(o){return""}}))]}),Object(R.jsxs)("div",{className:"jsonManagerCtrlFunctions",children:[Object(R.jsxs)("p",{className:"jsonManagerCtrlCategory",children:["Functions",Object(R.jsx)("span",{role:"button",tabIndex:"0",className:"addBtn",onClick:function(){return l(!0)}})]}),Object(R.jsx)("div",{className:"jsonManagerCtrlInputGroup",children:j.map((function(t,e){return""!==t.name&&Object(R.jsxs)("p",{className:"jsonManagerCtrlInputKey jsonManagerCtrlInputKeyHover",onPointerDown:r,"data-idx":e,"data-type":"func",children:[t.name,Object(R.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:m,"data-idx":e})]},"jsonManagerCtrlInputKey_".concat(e,"_func"))}))})]})]}),Object(R.jsx)("div",{className:"jsonManagerCtrlHint",children:">>>"}),Object(R.jsxs)("div",{className:"jsonManagerCtrlOutputs",children:[Object(R.jsxs)("div",{className:"jsonManagerCtrlPreview",style:{height:v&&b&&v.current&&b.current?"".concat(v.current.scrollHeight+b.current.scrollHeight,"px"):"initial",maxHeight:"200px"},children:[Object(R.jsx)("p",{className:"jsonManagerCtrlCategory",ref:b,children:"Preview"}),Object(R.jsx)("textarea",{disabled:!0,ref:v,className:"jsonManagerCtrlPreviewArea hasScrollbar",value:0!==a.length?JSON.stringify(Object.fromEntries(a.map((function(t){return[t.key,t.value?JSON.parse(t.value):""]}))),null,2):""})]}),Object(R.jsxs)("div",{className:"jsonManagerCtrlOutput",onPointerOver:o,onPointerOut:s,children:[Object(R.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Outputs"}),Object(R.jsx)("div",{className:"jsonManagerCtrlOutputArea",children:a.map((function(t,e){return Object(R.jsxs)("p",{className:"jsonManagerCtrlOutputKey",children:[t.key,Object(R.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:c,"data-key":t.key})]},"jsonManagerCtrlOutputKey_".concat(e))}))})]})]})]})};var mt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"JSONManager")).path=["New"],a.data.component=dt,a.jsonSocket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("content","JSONs",this.jsonSocket,!0),n=new j.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new jt(this.editor,"jsonManager",t,!0)).addOutput(n)}},{key:"worker",value:function(t,e,n){if(this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("jsonManager").setValue(t,e),"[]"===t.data.output)n.json="";else if(""!==t.data.output){var a=JSON.parse(t.data.output).map((function(t){return[t.key,JSON.parse(t.value)]}));n.json=JSON.stringify(Object.fromEntries(a))}n.outputFunctions=t.data.outputFunctions}}]),n}(j.c.Component),ft=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,r=this.state,o=r.outputs,s=r.controls,c=r.inputs,i=r.selected;return Object(R.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(R.jsx)("div",{className:"title",children:e.name}),o.map((function(t){return Object(R.jsxs)("div",{className:"output",children:[Object(R.jsx)("div",{className:"output-title",children:t.name}),Object(R.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),s.map((function(t){return Object(R.jsx)(m.a,{className:"control",control:t,innerRef:a},t.key)})),c.map((function(t){return Object(R.jsxs)("div",{className:"input",children:[Object(R.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(R.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(R.jsx)(m.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(m.b),vt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"API")).path=["New"],a.data.component=ft,a.jsonSocket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new lt(this.editor,"method",t,!1,"Method",["GET","POST","PUT","PATCH","DELETE","OPTIONS"])).addControl(new ct(this.editor,"url",t,!1,"URL","https://example.com/bar")).addControl(new st(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new ut(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.url=t.data.url,n.cached=t.data.cached,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(j.c.Component),bt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,r=this.state,o=r.outputs,s=r.controls,c=r.inputs,i=r.selected,u=s.filter((function(t){return"db"===t.key})).map((function(t){return""===t.props.value?"DB":t.props.value.toUpperCase()}))[0],l=s.filter((function(t){return"user"===t.key})).map((function(t){return""===t.props.value?"USER":t.props.value.toUpperCase()}))[0],p="".concat(u,"_PASS_ON_").concat(l);return Object(R.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(R.jsx)("div",{className:"title",children:e.name}),o.map((function(t){return Object(R.jsxs)("div",{className:"output",children:[Object(R.jsx)("div",{className:"output-title",children:t.name}),Object(R.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),s.map((function(t){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(m.a,{className:"control",control:t,innerRef:a},t.key),"db"===t.key&&Object(R.jsxs)("div",{className:"control",title:"pass",children:[Object(R.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"DB_PASS"}),Object(R.jsx)("textarea",{rows:"3",placeholder:"set ".concat(p," when tuna api starting"),value:"",disabled:!0})]})]})})),c.map((function(t){return Object(R.jsxs)("div",{className:"input",children:[Object(R.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(R.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(R.jsx)(m.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(m.b),Ot=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a){var r;return Object(F.a)(this,n),(r=e.call(this,"MySQL")).path=["New"],r.data.component=bt,r.jsonSocket=t,r.sqlSocket=a,r}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket),a=new j.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new lt(this.editor,"tls",t,!1,"TLS",["false","true","skip-verify","preferred"])).addControl(new ct(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new ct(this.editor,"port",t,!1,"PORT","3306")).addControl(new ct(this.editor,"user",t,!1,"USER","guest")).addControl(new ct(this.editor,"db",t,!1,"DB_NAME","foo")).addControl(new st(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new ut(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.tls=t.data.tls,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(j.c.Component),gt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a){var r;return Object(F.a)(this,n),(r=e.call(this,"PostgreSQL")).path=["New"],r.data.component=bt,r.jsonSocket=t,r.sqlSocket=a,r}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket),a=new j.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new lt(this.editor,"tls",t,!1,"SSLMODE",["disable","require","verify-ca","verify-full"])).addControl(new ct(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new ct(this.editor,"port",t,!1,"PORT","5432")).addControl(new ct(this.editor,"user",t,!1,"USER","guest")).addControl(new ct(this.editor,"db",t,!1,"DB_NAME","foo")).addControl(new st(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new ut(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.sslmode=t.data.sslmode,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached)}}]),n}(j.c.Component);function yt(){return(yt=Object(p.a)(h.a.mark((function t(e){var n,a,r,o,s,c,i,d,O,k,w,F,E,M,T;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new j.c.Socket("String value"),(a=new j.c.Socket("Json value")).combineWith(n),(r=new j.c.Socket("Template value")).combineWith(n),(o=new j.c.Socket("Handlebars value")).combineWith(r),(s=new j.c.Socket("Pug value")).combineWith(r),(c=new j.c.Socket("HTML value")).combineWith(n),i=new j.c.Socket("SQL value"),d=[new pt(n),new mt(a),new _(a),new Q(a,r,c),new tt(o),new at(s),new U(i),new vt(a),new Ot(a,i),new gt(a,i)],O=window.navigator.userAgent.toLowerCase(),k=-1!==O.indexOf("mac os x"),w=function(){var t=document.activeElement.nodeName;return"TEXTAREA"===t||"INPUT"===t},(F=new j.c.NodeEditor("tuna-mayonnaise@0.0.1",e)).use(f.a),F.use(m.d),F.use(b.a,{searchBar:!1,delay:100,allocate:function(t){return t.path},rename:function(t){return t.name},items:{Arrange:function(){F.nodes.forEach((function(t){F.trigger("arrange",t)}))},Undo:function(){F.trigger("undo")},Redo:function(){F.trigger("redo")},Save:function(){S.a.post("/regist",F.toJSON()).then((function(){return u.b.success("SAVED :)")})).catch((function(){return u.b.error("NOT CONNECTED :(")}))},Download:function(){var t=new Blob([JSON.stringify(F.toJSON())],{type:"application/json; charset=utf-8"});Object(I.saveAs)(t,"tuna-mayonnaise.json")},Debug:function(){console.log(JSON.stringify(F.toJSON()))}}}),F.on("zoom",(function(t){var e=t.source;return"dblclick"!==e&&"wheel"===e&&!w()})),F.use(N.a,{keyboard:!1}),F.on("keydown",(function(t){if(!w()){switch(t.code){case"Delete":case"Backspace":return F.selected.each((function(t){F.removeNode(t)})),void F.selected.clear();case"Space":var e=F.view.container.getBoundingClientRect(),n=new PointerEvent("contextmenu",{clientX:e.left+e.width/2,clientY:e.top+e.height/2});return void F.trigger("contextmenu",{e:n,view:F.view})}if(t.ctrlKey||k&&t.metaKey)switch(t.code){case"KeyY":return void F.trigger("redo");case"KeyZ":t.shiftKey?F.trigger("redo"):F.trigger("undo")}}})),F.use(g.a),F.use(y.a,{type:y.a.DEFAULT,transformer:function(){return function(t){var e=Object(l.a)(t,4);return[[e[0],e[1]],[e[2],e[3]]]}},curve:y.a.curveBundle,options:{vertical:!1,curvature:.4},arrow:{color:"steelblue",marker:"M-5,-10 L-5,10 L20,0 z"}}),F.use(x.a),F.use(C.a,{margin:{x:200,y:50},depth:0}),E=new j.c.Engine("tuna-mayonnaise@0.0.1"),d.forEach((function(t){F.register(t),E.register(t)})),t.next=31,S.a.get("/tuna-configuration").then((function(t){return t.data})).catch((function(){return document.getElementsByClassName("rightClick")[0].style.display="block",null}));case 31:if(null===(M=t.sent)){t.next=38;break}return t.next=35,F.fromJSON(M);case 35:u.b.success("RESUMED :)"),t.next=43;break;case 38:return t.next=40,d[0].createNode();case 40:(T=t.sent).position=[1e3,200],F.addNode(T);case 43:F.on("showcontextmenu",(function(){return document.getElementsByClassName("rightClick")[0].style.display="none",!0})),F.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelectorAll(".editorTextarea").forEach((function(t){t.addEventListener("wheel",(function(e){w()&&(t.parentElement.parentElement.scrollTop+=e.deltaY)}))})),t.next=3,E.abort();case 3:return t.next=5,E.process(F.toJSON());case 5:case"end":return t.stop()}}),t)})))),F.view.resize(),F.trigger("process"),v.a.zoomAt(F,F.nodes);case 48:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(323);var xt=function(){return Object(R.jsxs)("div",{className:"App",children:[Object(R.jsx)(u.a,{}),Object(R.jsx)("img",{className:"rightClick",src:"right-click.svg",width:"200",height:"200",alt:"RightClick for Menu",style:{display:"none",position:"absolute",top:"25%",left:"25%",pointerEvents:"none"}}),Object(R.jsx)("div",{style:{width:"100vh",height:"100vh"},ref:function(t){return t&&function(t){return yt.apply(this,arguments)}(t)}})]})};i.a.setAppElement("#root");var kt=document.getElementById("root");s.a.render(Object(R.jsx)(xt,{}),kt)}},[[324,1,2]]]);