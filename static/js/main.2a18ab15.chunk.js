(this["webpackJsonptuna-mayonnaise-ui"]=this["webpackJsonptuna-mayonnaise-ui"]||[]).push([[0],{132:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a),r=n(16),s=n.n(r),c=n(23),i=n.n(c),u=n(10),l=n(9),p=n(35),d=n(7),h=n.n(d),j=n(2),m=n(8),b=n(59),f=n(60),v=n(70),O=n(63),g=n.n(O),y=n(27),k=n(64),x=n(65),C=n.n(x),w=n(66),N=n(36),S=n.n(N),I=n(67),F=n(3),E=n(4),M=n(6),T=n(5),J=n(17),P=n.n(J),D=n(13),A=(n(105),n(22),n(68)),R=n(134),L=n(0),B=function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(e),r=Object(l.a)(o,2),s=r[0],c=r[1],i=Object(a.useState)(!1),p=Object(l.a)(i,2),d=p[0],h=p[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),b=m[0],f=m[1];return Object(R.a)((function(){null!==b&&(u.b.error(b),f(null))}),1e4),Object(L.jsx)(P.a,{value:s,onValueChange:function(t){try{A.parse(t),h(!1),f(null)}catch(e){f(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(D.highlight)(t,D.languages.json)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"300px"}})},q=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var c=o.data[a]||'{"name": "value"}';return o.data[a]=c,o.data.output=c,r.props={readonly:s,value:c,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);q.component=function(t){var e=t.value,n=t.onChange;return Object(L.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(L.jsx)(B,{value:e,onChange:function(t){return n(t)}})})};var V=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"JSON")).path=["New"],a.socket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("json","JSON",this.socket);return t.addControl(new q(this.editor,"json",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.json=t.data.json}}]),n}(j.c.Component),K=(n(107),n(69)),H=function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(e),r=Object(l.a)(o,2),s=r[0],c=r[1],i=Object(a.useState)(!1),p=Object(l.a)(i,2),d=p[0],h=p[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),b=m[0],f=m[1];return Object(R.a)((function(){null!==b&&(u.b.error(b),f(null))}),1e4),Object(L.jsx)(P.a,{value:s,onValueChange:function(t){try{K.parse(t),h(!1),f(null)}catch(e){f(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(D.highlight)(t,D.languages.sql)},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"300px"}})},_=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var c=o.data[a]||"SELECT * FROM users";return o.data[a]=c,o.data.output=c,r.props={readonly:s,value:c,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);_.component=function(t){var e=t.value,n=t.onChange;return Object(L.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(L.jsx)(H,{value:e,onChange:function(t){return n(t)}})})};var U=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"SQL")).path=["New"],a.socket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("sql","SQL",this.socket);return t.addControl(new _(this.editor,"sql",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.sql=t.data.sql}}]),n}(j.c.Component),W=n(25),z=n.n(W),Q=n(26),Y=n.n(Q),$=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,o=a.outputs,r=a.controls,s=a.inputs,c=a.selected;return Object(L.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(L.jsx)("div",{className:"title",children:"Template"}),o.map((function(t){return Object(L.jsxs)("div",{className:"output",children:[Object(L.jsx)("div",{className:"output-title",children:t.name}),Object(L.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),r.map((function(t){return Object(L.jsx)(m.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(L.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(m.b),G=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.keys=[],r.component=n.component,r.props={readonly:s,value:"",onChange:function(){}},o.data.output="",r}return Object(E.a)(n,[{key:"setValue",value:function(t,e,n){var a=this;this.props.value=e,this.putData("output",e),this.putData("contentType",n),Object.entries(t).forEach((function(t){var e=Object(l.a)(t,2),n=e[0],o=e[1];o[0]&&a.putData(n,o[0])})),this.update()}}]),n}(j.c.Control);G.component=function(t){var e=t.value,n=t.onChange;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),Object(L.jsx)("textarea",{value:e,rows:10,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},disabled:!0})]})};var X=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r;return Object(F.a)(this,n),(r=e.call(this,"Template")).path=["New"],r.data.component=$,r.dataSocket=t,r.templateSocket=a,r.htmlSocket=o,r}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("template","TemplateEngine",this.templateSocket),n=new j.c.Input("json","Data (JSON)",this.dataSocket),a=new j.c.Output("html","HTML",this.htmlSocket);return n.addControl(new q(this.editor,"json",t)),t.addInput(e).addInput(n).addControl(new G(this.editor,"template",t,!0)).addOutput(a)}},{key:"worker",value:function(t,e,n){var a=e.json.length?e.json[0]:t.data.json,o=t.inputs.template.connections.filter((function(t){return"hbs"===(null===t||void 0===t?void 0:t.output)||"pug"===(null===t||void 0===t?void 0:t.output)})),r=function(){var n;if(0===o.length)return"No TemplateEngine detected...";var r=o[0].output,s=null!==(n=e.template)&&void 0!==n&&n.length?e.template[0]:t.data.json;return"pug"===r?z.a.render(s,JSON.parse(a)):"hbs"===r?Y.a.compile(s)(JSON.parse(a)):"Unknown TemplateEngine detected..."}();this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("template").setValue(e,r,"text/html; charset=utf-8"),n.html=r}}]),n}(j.c.Component),Z=(n(57),n(58),n(129),function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(e),r=Object(l.a)(o,2),s=r[0],c=r[1],i=Object(a.useState)(!1),p=Object(l.a)(i,2),d=p[0],h=p[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),b=m[0],f=m[1];return Object(R.a)((function(){null!==b&&(u.b.error(b),f(null))}),1e4),Object(L.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(L.jsx)(P.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:s,onValueChange:function(t){try{Y.a.precompile(t),h(!1),f(null)}catch(e){f(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(D.highlight)(t,D.languages.handlebars).split("\n").map((function(t){return'<span class="container_editor_line_number">'.concat(t,"</span>")})).join("\n")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"800px"}})})}),tt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var c=o.data[a]||"<div>{{name}}</div>";return o.data[a]=c,o.data.output=c,r.props={readonly:s,value:c,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);tt.component=function(t){var e=t.value,n=t.onChange;return Object(L.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(L.jsx)(Z,{value:e,onChange:function(t){return n(t)}})})};var et=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"Handlebars")).path=["New"],a.socket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("hbs","Handlebars",this.socket);return t.addControl(new tt(this.editor,"hbs",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.hbs=t.data.hbs}}]),n}(j.c.Component),nt=(n(130),function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(e),r=Object(l.a)(o,2),s=r[0],c=r[1],i=Object(a.useState)(!1),p=Object(l.a)(i,2),d=p[0],h=p[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),b=m[0],f=m[1];return Object(R.a)((function(){null!==b&&(u.b.error(b),f(null))}),1e4),Object(L.jsx)("div",{className:"hasScrollbar",style:{overflowY:"auto",maxHeight:"500px"},children:Object(L.jsx)(P.a,{textareaClassName:"editorTextarea",preClassName:"line-numbers",value:s,onValueChange:function(t){try{z.a.compile(t),h(!1),f(null)}catch(e){f(e.message),h(!0)}c(t),n(t)},highlight:function(t){return Object(D.highlight)(t,D.languages.pug).split("\n").map((function(t){return'<span class="container_editor_line_number">'.concat(t,"</span>")})).join("\n")},padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:12,background:d?"rgba(255, 0, 80, 0.7)":"#FFF",maxWidth:"800px"}})})}),at=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var c=o.data[a]||"div #{name}";return o.data[a]=c,o.data.output=c,r.props={readonly:s,value:c,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);at.component=function(t){var e=t.value,n=t.onChange;return Object(L.jsx)("div",{ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:Object(L.jsx)(nt,{value:e,onChange:function(t){return n(t)}})})};var ot=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"Pug")).path=["New"],a.socket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Output("pug","Pug",this.socket);return t.addControl(new at(this.editor,"pug",t)).addOutput(e)}},{key:"worker",value:function(t,e,n){n.pug=t.data.pug}}]),n}(j.c.Component),rt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,o=a.outputs,r=a.controls,s=a.inputs,c=a.selected;return Object(L.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(L.jsx)("div",{className:"title",children:"Endpoint"}),o.map((function(t){return Object(L.jsxs)("div",{className:"output",children:[Object(L.jsx)("div",{className:"output-title",children:t.name}),Object(L.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),r.map((function(t){return Object(L.jsx)(m.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(L.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(m.b),st=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.component=n.component,r.props={readonly:s,value:"",contentType:"",onChange:function(){}},o.data.output="",r}return Object(E.a)(n,[{key:"setValue",value:function(t,e,n,a,o){var r=this;this.props.value=e,this.props.contentType=n,this.putData("enabledFlag",a),this.putData("output",e),this.putData("contentType",n),this.putData("path",o),Object.entries(t).forEach((function(t){var e=Object(l.a)(t,2),n=e[0],a=e[1];a[0]&&r.putData(n,a[0])})),this.update()}}]),n}(j.c.Control);st.component=function(t){var e=t.value,n=t.contentType,a=t.onChange;return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"Preview"}),"text/html; charset=utf-8"===n?Object(L.jsx)("div",{className:"hasScrollbar",style:{backgroundColor:"white",overflowY:"auto",maxHeight:"500px"},dangerouslySetInnerHTML:{__html:e}}):Object(L.jsx)("textarea",{value:e,rows:10,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return a(String(t.target.value))},disabled:!0})]})};var ct=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var i=o.data[a]||!1;return o.data[a]=i,o.data.output=i,r.props={readonly:s,checked:i,title:c,onChange:function(t){r.setValue(!!t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.checked=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);ct.component=function(t){var e=t.checked,n=t.onChange,a=t.title,o=t.id,r=void 0===o?(new Date).getTime():o;return Object(L.jsxs)(L.Fragment,{children:[a&&Object(L.jsx)("div",{style:{color:"white",textAlign:"left",marginBottom:"5px"},children:a}),Object(L.jsxs)("div",{className:"switchArea",children:[Object(L.jsx)("input",{type:"checkbox",id:r,checked:e,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(+t.target.checked)}}),Object(L.jsx)("label",{htmlFor:r,children:Object(L.jsx)("span",{})}),Object(L.jsx)("div",{className:"swImg"})]})]})};var it=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var u=o.data[a]||"";return o.data[a]=u,o.data.output=u,r.props={readonly:s,value:u,title:c,placeHolder:i,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);it.component=function(t){var e=t.value,n=t.onChange,a=t.title,o=t.placeHolder;return Object(L.jsxs)(L.Fragment,{children:[a&&Object(L.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(L.jsx)("input",{type:"text",value:e,placeholder:o,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))}})]})};var ut=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var p=o.data[a]||"/foo";return o.data[a]=p,o.data.output=p,r.props={readonly:s,value:p,title:c,placeHolder:i,warn:l,onChange:function(t){""===t?r.props.warn=!0:"/metrics"===t||"/health"===t?(r.props.warn=!0,u.b.error("this Path is reserved, use another Path.")):r.props.warn=!1,r.setValue(t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){this.props.value=t,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);ut.component=function(t){var e=t.value,n=t.onChange,a=t.title,o=t.placeHolder,r=t.warn;return Object(L.jsxs)(L.Fragment,{children:[a&&Object(L.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(L.jsx)("input",{type:"text",value:e,placeholder:o,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(String(t.target.value))},style:{background:r?"rgba(255, 0, 80, 0.7)":"#FFF"}})]})};var lt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var p=o.data[a]||i;return o.data[a]=p,o.data.output=p,r.props={readonly:s,value:p,title:c,disabled:u,hidden:l,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.props.value=t,this.props.disabled=e,this.props.hidden=n,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);lt.component=function(t){var e=t.value,n=t.onChange,a=t.title,o=t.disabled,r=t.hidden;return Object(L.jsxs)("div",{style:{display:r?"none":"block"},children:[a&&Object(L.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:a}),Object(L.jsx)("input",{type:"number",value:e,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return n(+t.target.value)},disabled:o})]})};var pt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,o){var r,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7&&void 0!==arguments[7]&&arguments[7];Object(F.a)(this,n),(r=e.call(this,a)).emitter=t,r.key=a,r.component=n.component;var p=o.data[a]||i[0];return o.data[a]=p,o.data.output=p,r.props={readonly:s,value:p,title:c,values:i,disabled:u,hidden:l,onChange:function(t){r.setValue(t),r.emitter.trigger("process")}},r}return Object(E.a)(n,[{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.props.value=t,this.props.disabled=e,this.props.hidden=n,this.putData(this.key,t),this.putData("output",t),this.update()}}]),n}(j.c.Control);pt.component=function(t){var e=t.title,n=t.value,a=t.values,o=t.onChange,r=t.disabled,s=t.hidden;return Object(L.jsxs)("div",{style:{display:s?"none":"block"},children:[e&&Object(L.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:e}),Object(L.jsx)("select",{style:{width:"100%"},value:n,ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:function(t){return o(String(t.target.value))},disabled:r,children:a.map((function(t,e){return Object(L.jsx)("option",{value:t,children:t},"".concat(t,"_").concat(e))}))})]})};var dt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"Endpoint")).path=["New"],a.data.component=rt,a.stringSocket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e;t.data.enabledFlag=null===(e=t.data.enabledFlag)||void 0===e||e;var n=new j.c.Input("content","Content (JSON/HTML)",this.stringSocket);return n.addControl(new it(this.editor,"content",t)),t.addInput(n).addControl(new st(this.editor,"endpoint",t,!0)).addControl(new ct(this.editor,"enabledFlag",t,!1,"Enabled")).addControl(new pt(this.editor,"method",t,!1,"Method",["GET","POST","PUT","PATCH","DELETE","OPTIONS"])).addControl(new ut(this.editor,"path",t,!1,"Path","/foo")).addControl(new ct(this.editor,"botblockerEnableFlag",t,!1,"BotBlocker")).addControl(new ct(this.editor,"ratelimitEnableFlag",t,!1,"RateLimit")).addControl(new pt(this.editor,"ratelimitUnit",t,!1,"Unit",["any","ip"])).addControl(new lt(this.editor,"ratelimitLimit",t,!1,"Limit",30)).addControl(new lt(this.editor,"ratelimitBurst",t,!1,"Burst",0)).addControl(new lt(this.editor,"ratelimitExpireSecond",t,!1,"ExpireSecond",60))}},{key:"worker",value:function(t,e){var n=this,a=e.content.length?e.content[0]:"Rendering...",o=function(t){if(t){if("html"===t.output)return"text/html; charset=utf-8";if("json"===t.output)return"application/json; charset=utf-8"}return"text/plain; charset=utf-8"}(t.inputs.content.connections[0]),r=t.data.enabledFlag,s=t.data.path;this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("endpoint").setValue(e,a,o,r,s),["ratelimitUnit","ratelimitLimit","ratelimitBurst","ratelimitExpireSecond"].forEach((function(e){n.editor.nodes.find((function(e){return e.id===t.id})).controls.get(e).setValue(t.data[e],!t.data.ratelimitEnableFlag,!t.data.ratelimitEnableFlag)}))}}]),n}(j.c.Component),ht=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.bindSocket,n=t.bindControl,a=this.state,o=a.outputs,r=a.controls,s=a.inputs,c=a.selected;return Object(L.jsxs)("div",{className:"node ".concat(c),style:{background:"grey"},children:[Object(L.jsx)("div",{className:"title",children:"JSONManager"}),o.map((function(t){return Object(L.jsxs)("div",{className:"output",children:[Object(L.jsx)("div",{className:"output-title",children:t.name}),Object(L.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:e})]},t.key)})),r.map((function(t){return Object(L.jsx)(m.a,{className:"control",control:t,innerRef:n},t.key)})),s.map((function(t){return Object(L.jsxs)("div",{className:"input jsonManagerInput",children:[Object(L.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:e}),Object(L.jsx)("div",{className:"input-title",children:t.name})]},t.key)}))]})}}]),n}(m.b),jt=n(19),mt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a,r){var s,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object(F.a)(this,n),(s=e.call(this,a)).emitter=t,s.component=n.component,s.props={readonly:c,inputs:[],inputIds:[],outputs:r.data.output?JSON.parse(r.data.output):[],state:{pointerPos:{x:0,y:0},drag:{},selectedElement:{}},isDroppable:!1,onPointerOver:function(){s.props.isDroppable=!0},onPointerOut:function(){s.props.isDroppable=!1},onPointerDown:function(t){var e=t.currentTarget;s.props.state.pointerPos.x=t.clientX,s.props.state.pointerPos.y=t.clientY,s.props.state.selectedElement=e;var n=e.cloneNode(!0),a=n.style;a.transition="",a.pointerEvents="none",a.display="none",a.position="absolute";var o=document.getElementsByClassName("minimap")[0].previousElementSibling.style.transform.match(/^.*scale\((.*)\)$/)[1],r=(e.getBoundingClientRect().left-e.closest(".jsonManagerCtrl").getBoundingClientRect().left)/o+10;a.left="".concat(r,"px"),e.after(n);var c=e.getBoundingClientRect(),i={x:c.left,y:c.top};s.props.state.drag={dragElement:n,position:i},e.classList.remove("jsonManagerCtrlInputKeyHover");var u=e.closest(".node");u.style.cursor="grabbing",u.addEventListener("pointerup",s.props.onPointerUp),u.addEventListener("pointermove",s.props.onPointerMove)},onPointerMove:function(t){t.stopPropagation();var e=document.getElementsByClassName("minimap")[0].previousElementSibling.style.transform.match(/^.*scale\((.*)\)$/)[1],n=t.clientX,a=t.clientY,o=s.props.state,r=o.drag,c=o.pointerPos,i=(n-c.x)/e,u=(a-c.y)/e,l=r.dragElement.style;l.display="inline-block",l.zIndex="100",l.transform="translate(".concat(i,"px,").concat(u,"px)")},onPointerUp:function(){var t=s.props.state,e=t.drag,n=t.selectedElement;s.props.state.drag=null,n.classList.add("jsonManagerCtrlInputKeyHover");var a=n.closest(".node");if(a.style.cursor="pointer",a.removeEventListener("pointerup",s.props.onPointerUp),a.removeEventListener("pointermove",s.props.onPointerMove),s.props.isDroppable){var o=parseInt(n.dataset.idx,10),r=parseInt(n.dataset.nodeid,10),c=n.innerText;if("func"!==n.dataset.type)1===s.props.outputs.filter((function(t){return t.key===c})).length?s.props.outputs=s.props.outputs.map((function(t){return t.key===c?{srcId:r,srcIds:"",src:o,key:t.key,value:JSON.stringify(JSON.parse(s.props.inputs[o])[t.key])}:t})):s.props.outputs.push({srcId:r,srcIds:"",src:o,key:c,value:JSON.stringify(JSON.parse(s.props.inputs[o])[c])});else{var i=s.props.outputFunctions[o].params,u=s.props.functions.filter((function(t){return t.name===s.props.outputFunctions[o].func}))[0],l=u.paramCount,p=u.logic,d=function(){if(i[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(i[0]),e=t[1],n=t[4];return n?{p0:JSON.parse(s.props.inputs[e])[n],p0Id:e}:{p0:JSON.parse(s.props.inputs[e]),p0Id:e}}return{p0:i[0],p0Id:null}}(),h=d.p0,j=d.p0Id,m=function(){if(2===l&&i[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(i[1]),e=t[1],n=t[4];return n?{p1:JSON.parse(s.props.inputs[e])[n],p1Id:e}:{p1:JSON.parse(s.props.inputs[e]),p1Id:e}}return{p1:i[1],p1Id:null}}(),b=m.p1,f=m.p1Id,v=1===l?p(h):p(h,b),O=1===l?null!==j?"".concat(j,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(j,"']"))[0].dataset.nodeid,10)):"":null==j&&null==f?"":null==j?"".concat(f,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(f,"']"))[0].dataset.nodeid,10)):"".concat(j,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(j,"']"))[0].dataset.nodeid,10));1===s.props.outputs.filter((function(t){return t.key===c})).length?s.props.outputs=s.props.outputs.map((function(t){return t.key===c?{srcId:-1,srcIds:O,src:-1*(o+1),key:t.key,value:JSON.stringify(v)}:t})):s.props.outputs.push({srcId:-1,srcIds:O,src:-1*(o+1),key:c,value:JSON.stringify(v)})}s.putData("output",JSON.stringify(s.props.outputs)),s.update(),s.emitter.trigger("process")}e.dragElement.remove()},onClickCloseBtn:function(t){var e=t.currentTarget;s.props.outputs=s.props.outputs.reduce((function(t,n){return n.key===e.dataset.key?t:[].concat(Object(jt.a)(t),[n])}),[]),s.putData("output",JSON.stringify(s.props.outputs)),s.update(),s.emitter.trigger("process")},isModalOpen:!1,setModalOpen:function(t){s.props.isModalOpen=t,s.update(),s.emitter.trigger("process")},outputFunctions:Array.isArray(r.data.outputFunctions)&&0===r.data.outputFunctions.length||!r.data.outputFunctions?[]:JSON.parse(r.data.outputFunctions),functions:[{name:"Naming",paramCount:1,symbol:null,logic:function(t){return t}}],onClickAddBtn:function(t){var e=t.currentTarget.previousElementSibling.value;""!==e&&(s.props.outputFunctions.push({func:e,name:"",params:[],warn:!1}),s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process"))},onClickRemoveBtn:function(t){var e=parseInt(t.currentTarget.dataset.idx,10),n=s.props.outputFunctions[e].name;s.props.outputs=s.props.outputs.filter((function(t){return t.key!==n})),s.props.outputFunctions=s.props.outputFunctions.filter((function(t,n){return n!==e})),s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process")},onChangeModalFunc:function(t){var e=parseInt(t.currentTarget.dataset.idx,10);1===s.props.outputFunctions.filter((function(e){return e.name===t.target.value})).length?s.props.outputFunctions[e].warn=!0:s.props.outputFunctions[e].warn=!1,s.props.outputFunctions[e].name=t.target.value,s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.update(),s.emitter.trigger("process")},onChangeModalFuncParams:function(t){var e=parseInt(t.currentTarget.dataset.idx,10),n=parseInt(t.currentTarget.dataset.paramsIdx,10);if(2===n&&s.props.outputFunctions[e].params.length<2&&(s.props.outputFunctions[e].params[0]=null),s.props.outputFunctions[e].params[n]=t.target.value,s.putData("outputFunctions",JSON.stringify(s.props.outputFunctions)),s.props.outputFunctions[e].name){var a=s.props.outputFunctions[e].name,o=s.props.outputFunctions[e].params,r=s.props.functions.filter((function(t){return t.name===s.props.outputFunctions[e].func}))[0],c=r.paramCount,i=r.logic;if(1===c||o[0]){var u=function(){if(o[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(o[0]),e=t[1],n=t[4];return n?{p0:JSON.parse(s.props.inputs[e])[n],p0Id:e}:{p0:JSON.parse(s.props.inputs[e]),p0Id:e}}return{p0:o[0],p0Id:null}}(),l=u.p0,p=u.p0Id,d=function(){if(2===c&&o[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(o[1]),e=t[1],n=t[4];return n?{p1:JSON.parse(s.props.inputs[e])[n],p1Id:e}:{p1:JSON.parse(s.props.inputs[e]),p1Id:e}}return{p1:o[1],p1Id:null}}(),h=d.p1,j=d.p1Id,m=1===c?i(l):i(l,h),b=1===c?null!==p?"".concat(p,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(p,"']"))[0].dataset.nodeid,10)):"":null==p&&null==j?"":null==p?"".concat(j,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(j,"']"))[0].dataset.nodeid,10)):"".concat(p,":").concat(parseInt(document.querySelectorAll(".jsonManagerCtrlInputKey[data-idx='".concat(p,"']"))[0].dataset.nodeid,10));1===s.props.outputs.filter((function(t){return t.key===a})).length&&(s.props.outputs=s.props.outputs.map((function(t){return t.key===a?{srcId:-1,srcIds:b,src:-1*(e+1),key:t.key,value:JSON.stringify(m)}:t})))}}s.update(),s.emitter.trigger("process")},textAreaRef:o.a.createRef(),previewRef:o.a.createRef()},s}return Object(E.a)(n,[{key:"setValue",value:function(t,e){var n=this,a=t.inputs.content.connections.map((function(t){return t.node})),o=e.content;(this.props.inputs=o,this.props.inputIds=a,0===o.length&&(this.props.outputs=[],this.props.outputFunctions=[]),a.length>o.length)?(this.props.outputs=[],this.props.outputFunctions=[]):(o.forEach((function(t,e){return n.props.outputs=n.props.outputs.reduce((function(n,a){if(a.src===e){var o=JSON.parse(t);return Object.keys(o).includes(a.key)?[].concat(Object(jt.a)(n),[{srcId:a.srcId,srcIds:a.srcIds,src:a.src,key:a.key,value:JSON.stringify(o[a.key])}]):n}return[].concat(Object(jt.a)(n),[a])}),[])})),this.props.outputFunctions.filter((function(t){return t.name&&t.params.reduce((function(t,e){return t||e.startsWith("inputs[")}),!1)})).length&&(this.props.outputFunctions.forEach((function(t,e){try{var a=t.name,o=t.params,r=n.props.functions.filter((function(e){return e.name===t.func}))[0],s=r.paramCount,c=r.logic;if(1===s||o[0]){var i=function(){if(void 0!==o[0]&&o[0].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(o[0]),e=t[1],a=t[4],r=a?JSON.parse(n.props.inputs[e])[a]:JSON.parse(n.props.inputs[e]);if(void 0===r)throw Error;return r}return o[0]}(),u=function(){if(2===s&&void 0!==o[1]&&o[1].startsWith("inputs[")){var t=/^inputs\[(\d+)\](([^.]?)|\.(.*))$/.exec(o[1]),e=t[1],a=t[4],r=a?JSON.parse(n.props.inputs[e])[a]:JSON.parse(n.props.inputs[e]);if(void 0===r)throw Error;return r}return o[1]}(),l=1===s?c(i):c(i,u);1===n.props.outputs.filter((function(t){return t.key===a})).length&&(n.props.outputs=n.props.outputs.map((function(t){return t.key===a?{srcId:t.srcId,srcIds:t.srcIds,src:t.src,key:t.key,value:JSON.stringify(l)}:t})))}}catch(p){n.props.outputs=n.props.outputs.filter((function(t){return t.key!==n.props.outputFunctions[e].name})),delete n.props.outputFunctions[e]}})),this.props.outputFunctions=this.props.outputFunctions.filter((function(t){return void 0!==t}))));this.putData("output",JSON.stringify(this.props.outputs)),this.update()}}]),n}(j.c.Control);mt.component=function(t){var e=t.inputs,n=t.inputIds,a=t.outputs,o=t.onPointerDown,r=t.onPointerOver,s=t.onPointerOut,c=t.onClickCloseBtn,u=t.isModalOpen,l=t.setModalOpen,p=t.functions,d=t.onClickAddBtn,h=t.onChangeModalFunc,j=t.outputFunctions,m=t.onClickRemoveBtn,b=t.onChangeModalFuncParams,f=t.textAreaRef,v=t.previewRef;return Object(L.jsxs)("div",{className:"jsonManagerCtrl",children:[Object(L.jsxs)(i.a,{isOpen:u,style:{content:{padding:"0px"}},children:[Object(L.jsxs)("div",{className:"jsonManagerModalTitle",children:[Object(L.jsx)("p",{style:{display:"inline-block",fontWeight:"600",fontSize:"18px"},children:"Functions"}),Object(L.jsx)("span",{role:"button",tabIndex:"0",className:"closeBtn",onClick:function(){return l(!1)}})]}),Object(L.jsxs)("div",{className:"jsonManagerModalContent",children:[Object(L.jsxs)("select",{style:{color:"#767676"},ref:function(t){return t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},children:[Object(L.jsx)("option",{value:"",style:{display:"none"},children:"Select your function"}),p.map((function(t){return Object(L.jsx)("option",{value:t.name,children:t.name},t.name)}))]}),Object(L.jsx)("div",{role:"button",tabIndex:"0",className:"modalAddBtn",onClick:d,children:"Add"}),j.map((function(t,e){return Object(L.jsxs)("div",{className:"modalFunction",children:[Object(L.jsxs)("p",{className:"modalFunctionTitle",children:[t.func,Object(L.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:m,"data-idx":e})]}),Object(L.jsxs)("div",{className:"modalFunctionKey",children:[Object(L.jsx)("p",{className:"modalFunctionKeyTitle",children:"name:"}),Object(L.jsx)("input",{type:"text",value:t.name,placeholder:"name to use output",ref:function(t){t&&t.addEventListener("pointerdown",(function(t){return t.stopPropagation()}))},onChange:h,"data-idx":e,style:{background:t.warn?"rgba(255, 0, 80, 0.7)":"#FFF"}})]}),Object(L.jsxs)("div",{className:"modalFunctionKey",children:[Object(L.jsx)("p",{className:"modalFunctionKeyTitle",children:"params: "}),Object(L.jsx)("div",{className:"modalFunctionContent",children:function(){var n=p.filter((function(e){return e.name===t.func}))[0];return 1===n.paramCount?Object(L.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_0"),placeholder:"Input or Select your param",onChange:b,"data-idx":e,"data-params-idx":0,value:t.params[0]?t.params[0]:""}):Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_0"),placeholder:"Input or Select your param",onChange:b,"data-idx":e,"data-params-idx":0,value:t.params[0]?t.params[0]:null}),Object(L.jsx)("span",{className:"modalFunctionContentSymbol",children:n.symbol}),Object(L.jsx)("input",{className:"modalFunctionContentInput",list:"inputs-datalist",name:"func-".concat(e,"_1"),placeholder:"Input or Select your param",onChange:b,"data-idx":e,"data-params-idx":1,value:t.params[1]?t.params[1]:null})]})}()})]})]},"modalFunction_".concat(e))})),Object(L.jsx)("datalist",{id:"inputs-datalist",children:e.map((function(t,e){try{var n=JSON.parse(t);return function(){var t=Array.isArray(n)?[Object(L.jsx)("option",{value:"inputs[".concat(e,"]"),children:"inputs[".concat(e,"]")},"inputs[".concat(e,"]"))]:[];return[].concat(t,Object(jt.a)(Object.keys(n).map((function(t){return Object(L.jsx)("option",{value:"inputs[".concat(e,"].").concat(t),children:"inputs[".concat(e,"].").concat(t)},"inputs[".concat(e,"].").concat(t))}))))}()}catch(a){return""}}))})]})]}),Object(L.jsxs)("div",{className:"jsonManagerCtrlInputs",children:[Object(L.jsxs)("div",{className:"jsonManagerCtrlInput",children:[Object(L.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Inputs"}),e.map((function(t,e){try{var a=JSON.parse(t);return Array.isArray(a)?Object(L.jsxs)("div",{className:"jsonManagerCtrlInputGroup",children:[Object(L.jsxs)("p",{className:"jsonManagerCtrlInputTitle",children:["inputs[",e,"]"]}),Object(L.jsx)("p",{className:"jsonManagerCtrlInputKey","data-nodeid":n[e],children:"Array"})]},"jsonManagerCtrlInputGroup_".concat(e)):Object(L.jsxs)("div",{className:"jsonManagerCtrlInputGroup",children:[Object(L.jsxs)("p",{className:"jsonManagerCtrlInputTitle",children:["inputs[",e,"]"]}),Object.keys(a).map((function(t,a){return Object(L.jsx)("p",{className:"jsonManagerCtrlInputKey jsonManagerCtrlInputKeyHover",onPointerDown:o,"data-idx":e,"data-nodeid":n[e],children:t},"jsonManagerCtrlInputKey_".concat(a))}))]},"jsonManagerCtrlInputGroup_".concat(e))}catch(r){return""}}))]}),Object(L.jsxs)("div",{className:"jsonManagerCtrlFunctions",children:[Object(L.jsxs)("p",{className:"jsonManagerCtrlCategory",children:["Functions",Object(L.jsx)("span",{role:"button",tabIndex:"0",className:"addBtn",onClick:function(){return l(!0)}})]}),Object(L.jsx)("div",{className:"jsonManagerCtrlInputGroup",children:j.map((function(t,e){return""!==t.name&&Object(L.jsxs)("p",{className:"jsonManagerCtrlInputKey jsonManagerCtrlInputKeyHover",onPointerDown:o,"data-idx":e,"data-type":"func",children:[t.name,Object(L.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:m,"data-idx":e})]},"jsonManagerCtrlInputKey_".concat(e,"_func"))}))})]})]}),Object(L.jsx)("div",{className:"jsonManagerCtrlHint",children:">>>"}),Object(L.jsxs)("div",{className:"jsonManagerCtrlOutputs",children:[Object(L.jsxs)("div",{className:"jsonManagerCtrlPreview",style:{height:f&&v&&f.current&&v.current?"".concat(f.current.scrollHeight+v.current.scrollHeight,"px"):"initial",maxHeight:"200px"},children:[Object(L.jsx)("p",{className:"jsonManagerCtrlCategory",ref:v,children:"Preview"}),Object(L.jsx)("textarea",{disabled:!0,ref:f,className:"jsonManagerCtrlPreviewArea hasScrollbar",value:0!==a.length?JSON.stringify(Object.fromEntries(a.map((function(t){return[t.key,t.value?JSON.parse(t.value):""]}))),null,2):""})]}),Object(L.jsxs)("div",{className:"jsonManagerCtrlOutput",onPointerOver:r,onPointerOut:s,children:[Object(L.jsx)("p",{className:"jsonManagerCtrlCategory",children:"Outputs"}),Object(L.jsx)("div",{className:"jsonManagerCtrlOutputArea",children:a.map((function(t,e){return Object(L.jsxs)("p",{className:"jsonManagerCtrlOutputKey",children:[t.key,Object(L.jsx)("span",{role:"button",tabIndex:"0",className:"removeBtn",onClick:c,"data-key":t.key})]},"jsonManagerCtrlOutputKey_".concat(e))}))})]})]})]})};var bt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"JSONManager")).path=["New"],a.data.component=ht,a.jsonSocket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("content","JSONs",this.jsonSocket,!0),n=new j.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new mt(this.editor,"jsonManager",t,!0)).addOutput(n)}},{key:"worker",value:function(t,e,n){if(this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("jsonManager").setValue(t,e),"[]"===t.data.output)n.json="";else if(""!==t.data.output){var a=JSON.parse(t.data.output).map((function(t){return[t.key,JSON.parse(t.value)]}));n.json=JSON.stringify(Object.fromEntries(a))}n.outputFunctions=t.data.outputFunctions}}]),n}(j.c.Component),ft=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,o=this.state,r=o.outputs,s=o.controls,c=o.inputs,i=o.selected;return Object(L.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(L.jsx)("div",{className:"title",children:e.name}),r.map((function(t){return Object(L.jsxs)("div",{className:"output",children:[Object(L.jsx)("div",{className:"output-title",children:t.name}),Object(L.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),s.map((function(t){return Object(L.jsx)(m.a,{className:"control",control:t,innerRef:a},t.key)})),c.map((function(t){return Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(L.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(L.jsx)(m.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(m.b),vt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"API")).path=["New"],a.data.component=ft,a.jsonSocket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new pt(this.editor,"method",t,!1,"Method",["GET","POST","PUT","PATCH","DELETE","OPTIONS"])).addControl(new it(this.editor,"url",t,!1,"URL","https://example.com/bar")).addControl(new ct(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new lt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.url=t.data.url,n.cached=t.data.cached,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached,!t.data.cached)}}]),n}(j.c.Component),Ot=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,o=this.state,r=o.outputs,s=o.controls,c=o.inputs,i=o.selected,u=s.filter((function(t){return"db"===t.key})).map((function(t){return""===t.props.value?"DB":t.props.value.toUpperCase()}))[0],l=s.filter((function(t){return"user"===t.key})).map((function(t){return""===t.props.value?"USER":t.props.value.toUpperCase()}))[0],p="".concat(u,"_PASS_ON_").concat(l);return Object(L.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(L.jsx)("div",{className:"title",children:e.name}),r.map((function(t){return Object(L.jsxs)("div",{className:"output",children:[Object(L.jsx)("div",{className:"output-title",children:t.name}),Object(L.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),s.map((function(t){return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(m.a,{className:"control",control:t,innerRef:a},t.key),"db"===t.key&&Object(L.jsxs)("div",{className:"control",title:"pass",children:[Object(L.jsx)("label",{style:{color:"white",display:"block",textAlign:"left"},children:"DB_PASS"}),Object(L.jsx)("textarea",{rows:"3",placeholder:"set ".concat(p," when tuna api starting"),value:"",disabled:!0})]})]})})),c.map((function(t){return Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(L.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(L.jsx)(m.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(m.b),gt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a){var o;return Object(F.a)(this,n),(o=e.call(this,"MySQL")).path=["New"],o.data.component=Ot,o.jsonSocket=t,o.sqlSocket=a,o}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket),a=new j.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new pt(this.editor,"tls",t,!1,"TLS",["false","true","skip-verify","preferred"])).addControl(new it(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new it(this.editor,"port",t,!1,"PORT","3306")).addControl(new it(this.editor,"user",t,!1,"USER","guest")).addControl(new it(this.editor,"db",t,!1,"DB_NAME","foo")).addControl(new ct(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new lt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.tls=t.data.tls,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached,!t.data.cached)}}]),n}(j.c.Component),yt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a){var o;return Object(F.a)(this,n),(o=e.call(this,"PostgreSQL")).path=["New"],o.data.component=Ot,o.jsonSocket=t,o.sqlSocket=a,o}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket),a=new j.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new pt(this.editor,"tls",t,!1,"SSLMODE",["disable","require","verify-ca","verify-full"])).addControl(new it(this.editor,"host",t,!1,"HOST","127.0.0.1")).addControl(new it(this.editor,"port",t,!1,"PORT","5432")).addControl(new it(this.editor,"user",t,!1,"USER","guest")).addControl(new it(this.editor,"db",t,!1,"DB_NAME","foo")).addControl(new ct(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new lt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.sslmode=t.data.sslmode,n.host=t.data.host,n.port=t.data.port,n.user=t.data.user,n.db=t.data.db,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached,!t.data.cached)}}]),n}(j.c.Component),kt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){return Object(F.a)(this,n),e.apply(this,arguments)}return Object(E.a)(n,[{key:"render",value:function(){var t=this.props,e=t.node,n=t.bindSocket,a=t.bindControl,o=this.state,r=o.outputs,s=o.controls,c=o.inputs,i=o.selected;return Object(L.jsxs)("div",{className:"node ".concat(i),style:{background:"grey"},children:[Object(L.jsx)("div",{className:"title",children:e.name}),r.map((function(t){return Object(L.jsxs)("div",{className:"output",children:[Object(L.jsx)("div",{className:"output-title",children:t.name}),Object(L.jsx)(m.c,{type:"output",socket:t.socket,io:t,innerRef:n})]},t.key)})),s.map((function(t){return Object(L.jsx)(m.a,{className:"control",control:t,innerRef:a},t.key)})),c.map((function(t){return Object(L.jsxs)("div",{className:"input",children:[Object(L.jsx)(m.c,{type:"input",socket:t.socket,io:t,innerRef:n}),!t.showControl()&&Object(L.jsx)("div",{className:"input-title",children:t.name}),t.showControl()&&Object(L.jsx)(m.a,{className:"input-control",control:t.control,innerRef:a})]},t.key)}))]})}}]),n}(m.b),xt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t,a){var o;return Object(F.a)(this,n),(o=e.call(this,"SQLite")).path=["New"],o.data.component=kt,o.jsonSocket=t,o.sqlSocket=a,o}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket),a=new j.c.Input("sql","SQL",this.sqlSocket);return t.addInput(a).addInput(e).addControl(new it(this.editor,"filename",t,!1,"FILE_NAME","test.db")).addControl(new ct(this.editor,"cached",t,!1,"Cached (In-Memory)")).addControl(new lt(this.editor,"cacheTime",t,!1,"CacheTime (seconds)",30)).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.sql=e.sql.length?e.sql[0]:t.data.sql,n.filename=t.data.filename,n.cached=t.data.cached,n.cacheTime=t.data.cacheTime,this.editor.nodes.find((function(e){return e.id===t.id})).controls.get("cacheTime").setValue(t.data.cacheTime,!t.data.cached,!t.data.cached)}}]),n}(j.c.Component),Ct=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(t){var a;return Object(F.a)(this,n),(a=e.call(this,"Request")).path=["New"],a.data.component=ft,a.jsonSocket=t,a}return Object(E.a)(n,[{key:"builder",value:function(t){var e=new j.c.Input("json","Dummy Output (JSON)",this.jsonSocket),n=new j.c.Output("json","JSON",this.jsonSocket);return t.addInput(e).addControl(new pt(this.editor,"type",t,!1,"Type",["QUERY","COOKIE","BODY"])).addOutput(n)}},{key:"worker",value:function(t,e,n){n.json=e.json.length?e.json[0]:t.data.json,n.type=t.data.type}}]),n}(j.c.Component),wt=function(t){Object(M.a)(n,t);var e=Object(T.a)(n);function n(){var t;return Object(F.a)(this,n),(t=e.call(this,"RedirectEndpoint")).path=["New"],t.data.component=ft,t}return Object(E.a)(n,[{key:"builder",value:function(t){var e;return t.data.enabledFlag=null===(e=t.data.enabledFlag)||void 0===e||e,t.addControl(new ct(this.editor,"enabledFlag",t,!1,"Enabled")).addControl(new ut(this.editor,"path",t,!1,"Path","/foo")).addControl(new it(this.editor,"url",t,!1,"Url","https://example.com"))}},{key:"worker",value:function(t,e,n){n.enabledFlag=t.data.enabledFlag,n.path=t.data.path,n.url=t.data.url}}]),n}(j.c.Component);function Nt(){return(Nt=Object(p.a)(h.a.mark((function t(e){var n,a,o,r,s,c,i,d,O,x,N,F,E,M,T;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new j.c.Socket("String value"),(a=new j.c.Socket("Json value")).combineWith(n),(o=new j.c.Socket("Template value")).combineWith(n),(r=new j.c.Socket("Handlebars value")).combineWith(o),(s=new j.c.Socket("Pug value")).combineWith(o),(c=new j.c.Socket("HTML value")).combineWith(n),i=new j.c.Socket("SQL value"),d=[new dt(n),new bt(a),new V(a),new X(a,o,c),new et(r),new ot(s),new U(i),new vt(a),new gt(a,i),new yt(a,i),new xt(a,i),new Ct(a),new wt],O=window.navigator.userAgent.toLowerCase(),x=-1!==O.indexOf("mac os x"),N=function(){var t=document.activeElement.nodeName;return"TEXTAREA"===t||"INPUT"===t},(F=new j.c.NodeEditor("tuna-mayonnaise@0.0.1",e)).use(b.a),F.use(m.d),F.use(v.a,{searchBar:!1,delay:100,allocate:function(t){return t.path},rename:function(t){return t.name},items:{Arrange:function(){F.nodes.forEach((function(t){F.trigger("arrange",t)}))},Undo:function(){F.trigger("undo")},Redo:function(){F.trigger("redo")},Save:function(){S.a.post("/regist",F.toJSON()).then((function(){return u.b.success("SAVED :)")})).catch((function(){return u.b.error("NOT CONNECTED :(")}))},Download:function(){var t=new Blob([JSON.stringify(F.toJSON())],{type:"application/json; charset=utf-8"});Object(I.saveAs)(t,"tuna-mayonnaise.json")},Debug:function(){console.log(JSON.stringify(F.toJSON()))}}}),F.on("zoom",(function(t){var e=t.source;return"dblclick"!==e&&"wheel"===e&&!N()})),F.use(w.a,{keyboard:!1}),F.on("keydown",(function(t){if(!N()){switch(t.code){case"Delete":case"Backspace":return F.selected.each((function(t){F.removeNode(t)})),void F.selected.clear();case"Space":var e=F.view.container.getBoundingClientRect(),n=new PointerEvent("contextmenu",{clientX:e.left+e.width/2,clientY:e.top+e.height/2});return void F.trigger("contextmenu",{e:n,view:F.view})}if(t.ctrlKey||x&&t.metaKey)switch(t.code){case"KeyY":return void F.trigger("redo");case"KeyZ":t.shiftKey?F.trigger("redo"):F.trigger("undo")}}})),F.use(g.a),F.use(y.a,{type:y.a.DEFAULT,transformer:function(){return function(t){var e=Object(l.a)(t,4);return[[e[0],e[1]],[e[2],e[3]]]}},curve:y.a.curveBundle,options:{vertical:!1,curvature:.4},arrow:{color:"steelblue",marker:"M-5,-10 L-5,10 L20,0 z"}}),F.use(k.a),F.use(C.a,{margin:{x:200,y:50},depth:0}),E=new j.c.Engine("tuna-mayonnaise@0.0.1"),d.forEach((function(t){F.register(t),E.register(t)})),t.next=31,S.a.get("/tuna-configuration").then((function(t){return t.data})).catch((function(){return document.getElementsByClassName("rightClick")[0].style.display="block",null}));case 31:if(null===(M=t.sent)){t.next=38;break}return t.next=35,F.fromJSON(M);case 35:u.b.success("RESUMED :)"),t.next=43;break;case 38:return t.next=40,d[0].createNode();case 40:(T=t.sent).position=[1e3,200],F.addNode(T);case 43:F.on("showcontextmenu",(function(){return document.getElementsByClassName("rightClick")[0].style.display="none",!0})),F.on("process nodecreated noderemoved connectioncreated connectionremoved",Object(p.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.querySelectorAll(".editorTextarea").forEach((function(t){t.addEventListener("wheel",(function(e){N()&&(t.parentElement.parentElement.scrollTop+=e.deltaY)}))})),t.next=3,E.abort();case 3:return t.next=5,E.process(F.toJSON());case 5:case"end":return t.stop()}}),t)})))),F.view.resize(),F.trigger("process"),f.a.zoomAt(F,F.nodes);case 48:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(131);var St=function(){return Object(L.jsxs)("div",{className:"App",children:[Object(L.jsx)(u.a,{}),Object(L.jsx)("img",{className:"rightClick",src:"right-click.svg",width:"200",height:"200",alt:"RightClick for Menu",style:{display:"none",position:"absolute",top:"25%",left:"25%",pointerEvents:"none"}}),Object(L.jsx)("div",{style:{width:"100vh",height:"100vh"},ref:function(t){return t&&function(t){return Nt.apply(this,arguments)}(t)}})]})};i.a.setAppElement("#root");var It=document.getElementById("root");s.a.render(Object(L.jsx)(St,{}),It)},25:function(t,e){t.exports=pug}},[[132,1,2]]]);